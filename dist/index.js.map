{"version":3,"sources":["../src/constants/translations.ts","../src/constants/index.ts","../src/utils/geometry.ts","../src/types/index.ts","../src/utils/horoscopeConverter.ts","../src/components/ZodiacWheel/ZodiacWheel.tsx","../src/components/HouseWheel/HouseWheel.tsx","../src/components/PlanetDisplay/PlanetDisplay.tsx","../src/components/AspectLines/AspectLines.tsx","../src/components/PlanetProjections/PlanetProjections.tsx","../src/components/AstroMandala/AstroMandala.tsx","../src/components/ChartInfoPanel/ChartInfoPanel.tsx","../src/components/AstroMandalaWithModal/AstroMandalaWithModal.tsx"],"names":["ASPECT_ANGLES","jsxs","jsx","Fragment","shouldSkipAspect","useMemo","formatDegree","useRef","useState","useEffect","size","useCallback","createElement","createPortal"],"mappings":"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","file":"index.js","sourcesContent":["import { MandalaLanguage } from '../types';\n\n/**\n * Translations for UI labels\n */\nexport interface Translations {\n    // Angle labels\n    ASC: string;\n    DSC: string;\n    MC: string;\n    IC: string;\n\n    // UI labels for modal/settings\n    settings: string;\n    close: string;\n    expand: string;\n    showSynastry: string;\n    showAspects: string;\n    showDegrees: string;\n    showHouses: string;\n    showChart2Houses: string;\n    showPlanetProjections: string;\n    showChartInfo: string;\n    includeAnglesInSynastry: string;\n    aspectTypes: string;\n    majorAspects: string;\n    minorAspects: string;\n    theme: string;\n    language: string;\n    light: string;\n    dark: string;\n    english: string;\n    spanish: string;\n\n    // Aspect names\n    conjunction: string;\n    opposition: string;\n    trine: string;\n    square: string;\n    sextile: string;\n    quincunx: string;\n    semisextile: string;\n    semisquare: string;\n    sesquiquadrate: string;\n    quintile: string;\n    biquintile: string;\n\n    // Chart labels\n    chart1: string;\n    chart2: string;\n    innerChart: string;\n    outerChart: string;\n\n    // Size labels\n    desktop: string;\n    tablet: string;\n    mobile: string;\n\n    // Legend\n    legend: string;\n    aspectColors: string;\n\n    // Birth data display\n    showBirthData: string;\n    downloadImage: string;\n    birthDate: string;\n    birthTime: string;\n    birthLocation: string;\n}\n\nexport const TRANSLATIONS: Record<MandalaLanguage, Translations> = {\n    en: {\n        // Angle labels\n        ASC: 'ASC',\n        DSC: 'DSC',\n        MC: 'MC',\n        IC: 'IC',\n\n        // UI labels\n        settings: 'Settings',\n        close: 'Close',\n        expand: 'Expand',\n        showSynastry: 'Show Synastry (Two Charts)',\n        showAspects: 'Show Aspects',\n        showDegrees: 'Show Degrees',\n        showHouses: 'Show Houses',\n        showChart2Houses: 'Show Chart 2 Houses',\n        showPlanetProjections: 'Show Planet Projections',\n        showChartInfo: 'Show Chart Info Panel',\n        includeAnglesInSynastry: 'Include AC/MC in Synastry Aspects',\n        aspectTypes: 'Aspect Types',\n        majorAspects: 'Major Aspects',\n        minorAspects: 'Minor Aspects',\n        theme: 'Theme',\n        language: 'Language',\n        light: 'Light',\n        dark: 'Dark',\n        english: 'English',\n        spanish: 'Espaol',\n\n        // Aspect names\n        conjunction: 'Conjunction',\n        opposition: 'Opposition',\n        trine: 'Trine',\n        square: 'Square',\n        sextile: 'Sextile',\n        quincunx: 'Quincunx',\n        semisextile: 'Semisextile',\n        semisquare: 'Semisquare',\n        sesquiquadrate: 'Sesquiquadrate',\n        quintile: 'Quintile',\n        biquintile: 'Biquintile',\n\n        // Chart labels\n        chart1: 'Chart 1',\n        chart2: 'Chart 2',\n        innerChart: 'Inner Chart',\n        outerChart: 'Outer Chart',\n\n        // Size labels\n        desktop: 'Desktop',\n        tablet: 'Tablet',\n        mobile: 'Mobile',\n\n        // Legend\n        legend: 'Legend',\n        aspectColors: 'Aspect colors',\n\n        // Birth data display\n        showBirthData: 'Show Birth Data on Chart',\n        downloadImage: 'Download Image',\n        birthDate: 'Date',\n        birthTime: 'Time',\n        birthLocation: 'Location',\n    },\n    es: {\n        // Angle labels\n        ASC: 'ASC',\n        DSC: 'DSC',\n        MC: 'MC',\n        IC: 'IC',\n\n        // UI labels\n        settings: 'Configuracin',\n        close: 'Cerrar',\n        expand: 'Expandir',\n        showSynastry: 'Mostrar Sinastra (Dos Cartas)',\n        showAspects: 'Mostrar Aspectos',\n        showDegrees: 'Mostrar Grados',\n        showHouses: 'Mostrar Casas',\n        showChart2Houses: 'Mostrar Casas de Carta 2',\n        showPlanetProjections: 'Mostrar Proyecciones Planetarias',\n        showChartInfo: 'Mostrar Panel de Info',\n        includeAnglesInSynastry: 'Incluir AC/MC en Aspectos de Sinastra',\n        aspectTypes: 'Tipos de Aspectos',\n        majorAspects: 'Aspectos Mayores',\n        minorAspects: 'Aspectos Menores',\n        theme: 'Tema',\n        language: 'Idioma',\n        light: 'Claro',\n        dark: 'Oscuro',\n        english: 'English',\n        spanish: 'Espaol',\n\n        // Aspect names\n        conjunction: 'Conjuncin',\n        opposition: 'Oposicin',\n        trine: 'Trgono',\n        square: 'Cuadratura',\n        sextile: 'Sextil',\n        quincunx: 'Quincuncio',\n        semisextile: 'Semisextil',\n        semisquare: 'Semicuadratura',\n        sesquiquadrate: 'Sesquicuadratura',\n        quintile: 'Quintil',\n        biquintile: 'Biquintil',\n\n        // Chart labels\n        chart1: 'Carta 1',\n        chart2: 'Carta 2',\n        innerChart: 'Carta Interior',\n        outerChart: 'Carta Exterior',\n\n        // Size labels\n        desktop: 'Escritorio',\n        tablet: 'Tableta',\n        mobile: 'Mvil',\n\n        // Legend\n        legend: 'Leyenda',\n        aspectColors: 'Colores de aspectos',\n\n        // Birth data display\n        showBirthData: 'Mostrar Datos de Nacimiento',\n        downloadImage: 'Descargar Imagen',\n        birthDate: 'Fecha',\n        birthTime: 'Hora',\n        birthLocation: 'Lugar',\n    },\n};\n\n/**\n * Get translations for a language\n */\nexport function getTranslations(language: MandalaLanguage = 'en'): Translations {\n    return TRANSLATIONS[language];\n}\n","import { ZodiacSign, PlanetName, AspectType, AspectColors } from '../types';\n\n/**\n * Zodiac sign symbols (Unicode)\n */\nexport const ZODIAC_SYMBOLS: Record<ZodiacSign, string> = {\n    Aries: '',\n    Taurus: '',\n    Gemini: '',\n    Cancer: '',\n    Leo: '',\n    Virgo: '',\n    Libra: '',\n    Scorpio: '',\n    Sagittarius: '',\n    Capricorn: '',\n    Aquarius: '',\n    Pisces: '',\n};\n\n/**\n * Planet symbols (Unicode)\n */\nexport const PLANET_SYMBOLS: Record<PlanetName, string> = {\n    Sun: '',\n    Moon: '',\n    Mercury: '',\n    Venus: '',\n    Mars: '',\n    Jupiter: '',\n    Saturn: '',\n    Uranus: '',\n    Neptune: '',\n    Pluto: '',\n    NorthNode: '',\n    SouthNode: '',\n    Chiron: '',\n    Lilith: '',\n    Ascendant: 'AC',\n    Midheaven: 'MC',\n};\n\n/**\n * Starting degree for each zodiac sign (0-360)\n */\nexport const SIGN_START_DEGREES: Record<ZodiacSign, number> = {\n    Aries: 0,\n    Taurus: 30,\n    Gemini: 60,\n    Cancer: 90,\n    Leo: 120,\n    Virgo: 150,\n    Libra: 180,\n    Scorpio: 210,\n    Sagittarius: 240,\n    Capricorn: 270,\n    Aquarius: 300,\n    Pisces: 330,\n};\n\n/**\n * Zodiac signs in order\n */\nexport const ZODIAC_ORDER: ZodiacSign[] = [\n    'Aries',\n    'Taurus',\n    'Gemini',\n    'Cancer',\n    'Leo',\n    'Virgo',\n    'Libra',\n    'Scorpio',\n    'Sagittarius',\n    'Capricorn',\n    'Aquarius',\n    'Pisces',\n];\n\n/**\n * Element colors for zodiac signs\n */\nexport const ELEMENT_COLORS: Record<string, string> = {\n    fire: '#e63946',    // Aries, Leo, Sagittarius\n    earth: '#588157',   // Taurus, Virgo, Capricorn\n    air: '#457b9d',     // Gemini, Libra, Aquarius\n    water: '#5a9fd4',   // Cancer, Scorpio, Pisces - lighter blue for visibility\n};\n\n/**\n * Get element for a zodiac sign\n */\nexport const SIGN_ELEMENTS: Record<ZodiacSign, string> = {\n    Aries: 'fire',\n    Taurus: 'earth',\n    Gemini: 'air',\n    Cancer: 'water',\n    Leo: 'fire',\n    Virgo: 'earth',\n    Libra: 'air',\n    Scorpio: 'water',\n    Sagittarius: 'fire',\n    Capricorn: 'earth',\n    Aquarius: 'air',\n    Pisces: 'water',\n};\n\n/**\n * Default aspect colors\n */\nexport const DEFAULT_ASPECT_COLORS: Required<AspectColors> = {\n    conjunction: '#ffcc00',\n    opposition: '#ff0000',\n    trine: '#00cc00',\n    square: '#cc0000',\n    sextile: '#0066cc',\n    quincunx: '#9933cc',\n    semisextile: '#66cc99',\n    semisquare: '#cc6666',\n    sesquiquadrate: '#cc9966',\n    quintile: '#cc66cc',\n    biquintile: '#66cccc',\n};\n\n/**\n * Aspect angles in degrees\n */\nexport const ASPECT_ANGLES: Record<AspectType, number> = {\n    conjunction: 0,\n    opposition: 180,\n    trine: 120,\n    square: 90,\n    sextile: 60,\n    quincunx: 150,\n    semisextile: 30,\n    semisquare: 45,\n    sesquiquadrate: 135,\n    quintile: 72,\n    biquintile: 144,\n};\n\n/**\n * Aspect line styles\n */\nexport const ASPECT_LINE_STYLES: Record<AspectType, { dashArray?: string; strokeWidth: number }> = {\n    conjunction: { strokeWidth: 2 },\n    opposition: { strokeWidth: 2 },\n    trine: { strokeWidth: 1.5 },\n    square: { strokeWidth: 1.5 },\n    sextile: { strokeWidth: 1 },\n    quincunx: { dashArray: '5,3', strokeWidth: 1 },\n    semisextile: { dashArray: '3,3', strokeWidth: 0.75 },\n    semisquare: { dashArray: '4,2', strokeWidth: 0.75 },\n    sesquiquadrate: { dashArray: '4,2', strokeWidth: 0.75 },\n    quintile: { dashArray: '2,2', strokeWidth: 0.75 },\n    biquintile: { dashArray: '2,2', strokeWidth: 0.75 },\n};\n\n// Export translations\nexport { TRANSLATIONS, getTranslations } from './translations';\nexport type { Translations } from './translations';\n","import { ZodiacSign, PlanetPosition } from '../types';\nimport { SIGN_START_DEGREES } from '../constants';\n\n/**\n * Convert degrees to radians\n */\nexport function degreesToRadians(degrees: number): number {\n    return (degrees * Math.PI) / 180;\n}\n\n/**\n * Convert radians to degrees\n */\nexport function radiansToDegrees(radians: number): number {\n    return (radians * 180) / Math.PI;\n}\n\n/**\n * Get absolute degree (0-360) from sign and degree within sign\n */\nexport function getAbsoluteDegree(sign: ZodiacSign, degree: number): number {\n    return SIGN_START_DEGREES[sign] + degree;\n}\n\n/**\n * Normalize an angle to 0-360 range\n */\nexport function normalizeAngle(angle: number): number {\n    let normalized = angle % 360;\n    if (normalized < 0) {\n        normalized += 360;\n    }\n    return normalized;\n}\n\n/**\n * Get the angle for positioning on the mandala wheel\n * The mandala has the Ascendant at the left (9 o'clock position)\n * and houses go counter-clockwise (1  2  3 goes down toward IC)\n */\nexport function getMandalaAngle(absoluteDegree: number, ascendantDegree?: number): number {\n    // If ascendant is provided, rotate chart so Ascendant is at the left (180)\n    const offset = ascendantDegree ?? 0;\n    // Houses go counter-clockwise from ASC, which means increasing angle in SVG\n    return normalizeAngle(absoluteDegree - offset + 180);\n}\n\n/**\n * Calculate x,y coordinates on a circle given angle and radius\n */\nexport function getPointOnCircle(\n    centerX: number,\n    centerY: number,\n    radius: number,\n    angleDegrees: number\n): { x: number; y: number } {\n    const angleRadians = degreesToRadians(angleDegrees);\n    return {\n        x: centerX + radius * Math.cos(angleRadians),\n        y: centerY - radius * Math.sin(angleRadians), // Negative because SVG y-axis is inverted\n    };\n}\n\n/**\n * Get planet absolute degree\n */\nexport function getPlanetAbsoluteDegree(planet: PlanetPosition): number {\n    return getAbsoluteDegree(planet.sign, planet.degree);\n}\n\n/**\n * Format degree for display (e.g., \"1523'\")\n */\nexport function formatDegree(degree: number): string {\n    const wholeDegrees = Math.floor(degree);\n    const minutes = Math.round((degree - wholeDegrees) * 60);\n    return `${wholeDegrees}${minutes.toString().padStart(2, '0')}'`;\n}\n\n/**\n * Check if two planets are in collision (too close together)\n * Returns true if planets are within threshold degrees of each other\n */\nexport function checkPlanetCollision(\n    degree1: number,\n    degree2: number,\n    threshold: number = 8\n): boolean {\n    const diff = Math.abs(normalizeAngle(degree1) - normalizeAngle(degree2));\n    return diff < threshold || diff > 360 - threshold;\n}\n\n/**\n * Calculate the angular distance between two degrees (shortest path)\n */\nfunction angularDistance(deg1: number, deg2: number): number {\n    const diff = Math.abs(normalizeAngle(deg1) - normalizeAngle(deg2));\n    return Math.min(diff, 360 - diff);\n}\n\n/**\n * Protected zones for angle labels (AS, MC, DS, IC) relative to ascendant\n * These are the positions where angle labels appear\n */\nconst ANGLE_LABEL_ZONES = [\n    { house: 1, label: 'AS', relativeOffset: 0 },     // Ascendant at 0\n    { house: 4, label: 'IC', relativeOffset: 270 },   // IC at 270 (bottom)\n    { house: 7, label: 'DS', relativeOffset: 180 },   // Descendant at 180\n    { house: 10, label: 'MC', relativeOffset: 90 },   // Midheaven at 90 (top)\n];\n\n/**\n * Check if a display angle is too close to any angle label zone\n */\nfunction isInAngleLabelZone(\n    displayAngle: number,\n    ascendantDegree: number,\n    threshold: number = 10\n): { inZone: boolean; pushDirection: number; zoneDegree: number } {\n    for (const zone of ANGLE_LABEL_ZONES) {\n        // The label appears at the house cusp position\n        // In the mandala, angles are displayed at specific positions\n        const zoneDegree = normalizeAngle(zone.relativeOffset);\n        const diff = displayAngle - zoneDegree;\n        const normalizedDiff = ((diff + 180) % 360) - 180; // Range: -180 to 180\n\n        if (Math.abs(normalizedDiff) < threshold) {\n            // Planet is too close to an angle label\n            // Push in the direction away from the label\n            return {\n                inZone: true,\n                pushDirection: normalizedDiff > 0 ? 1 : -1,\n                zoneDegree\n            };\n        }\n    }\n    return { inZone: false, pushDirection: 0, zoneDegree: 0 };\n}\n\n/**\n * Adjust planet positions to avoid overlapping\n * Uses an iterative force-based approach to spread out clustered planets\n * Also avoids collisions with angle labels (AS, MC, DS, IC)\n * Returns adjusted positions with offset angles\n */\nexport function adjustPlanetPositions(\n    planets: Array<{ planet: PlanetPosition; absoluteDegree: number }>,\n    threshold: number = 8,\n    ascendantDegree: number = 0\n): Array<{ planet: PlanetPosition; absoluteDegree: number; offset: number }> {\n    if (planets.length === 0) return [];\n    if (planets.length === 1) {\n        // Even single planets need angle label avoidance\n        const p = planets[0];\n        const displayAngle = getMandalaAngle(p.absoluteDegree, ascendantDegree);\n        const angleCheck = isInAngleLabelZone(displayAngle, ascendantDegree, 10);\n        const offset = angleCheck.inZone ? angleCheck.pushDirection * 12 : 0;\n        return [{ ...p, offset }];\n    }\n\n    // Initialize offsets\n    const result = planets.map((p) => ({\n        ...p,\n        offset: 0,\n        displayDegree: p.absoluteDegree,\n        displayAngle: getMandalaAngle(p.absoluteDegree, ascendantDegree)\n    }));\n\n    // Sort by absolute degree initially\n    result.sort((a, b) => a.absoluteDegree - b.absoluteDegree);\n\n    // Iterative relaxation algorithm\n    const minSpacing = threshold;\n    const maxIterations = 80;\n    const angleLabelThreshold = 10; // Extra space around angle labels\n\n    for (let iteration = 0; iteration < maxIterations; iteration++) {\n        let hasCollision = false;\n\n        // Update display degrees and angles\n        result.forEach(p => {\n            p.displayDegree = normalizeAngle(p.absoluteDegree + p.offset);\n            p.displayAngle = getMandalaAngle(p.displayDegree, ascendantDegree);\n        });\n\n        // Check collisions with angle labels (AS, MC, DS, IC)\n        for (const planet of result) {\n            const angleCheck = isInAngleLabelZone(planet.displayAngle, ascendantDegree, angleLabelThreshold);\n            if (angleCheck.inZone) {\n                hasCollision = true;\n                // Push away from the angle label\n                planet.offset += angleCheck.pushDirection * 2;\n            }\n        }\n\n        // Sort by display degree for collision detection\n        const sortedByDisplay = [...result].sort((a, b) => a.displayDegree - b.displayDegree);\n\n        // Check each adjacent pair (including wrap-around)\n        for (let i = 0; i < sortedByDisplay.length; i++) {\n            const current = sortedByDisplay[i];\n            const next = sortedByDisplay[(i + 1) % sortedByDisplay.length];\n\n            let distance = next.displayDegree - current.displayDegree;\n            if (distance < 0) distance += 360; // Handle wrap-around\n\n            if (distance < minSpacing && distance > 0) {\n                hasCollision = true;\n\n                // Calculate how much to push apart\n                const overlap = minSpacing - distance;\n                const pushAmount = overlap / 2 + 0.5;\n\n                // Push current backward and next forward\n                current.offset -= pushAmount;\n                next.offset += pushAmount;\n            }\n        }\n\n        // If no collisions, we're done\n        if (!hasCollision) break;\n\n        // Dampen offsets slightly to prevent oscillation\n        result.forEach(p => {\n            p.offset *= 0.92;\n        });\n    }\n\n    // Final pass: limit maximum offset to prevent planets from drifting too far\n    const maxOffset = 30;\n    result.forEach(p => {\n        p.offset = Math.max(-maxOffset, Math.min(maxOffset, p.offset));\n    });\n\n    return result;\n}\n\n/**\n * Get arc path for SVG\n */\nexport function getArcPath(\n    centerX: number,\n    centerY: number,\n    radius: number,\n    startAngle: number,\n    endAngle: number,\n    largeArc: boolean = false\n): string {\n    const start = getPointOnCircle(centerX, centerY, radius, startAngle);\n    const end = getPointOnCircle(centerX, centerY, radius, endAngle);\n\n    const largeArcFlag = largeArc ? 1 : 0;\n    const sweepFlag = 0; // Counter-clockwise\n\n    return `M ${start.x} ${start.y} A ${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.x} ${end.y}`;\n}\n","/**\n * Zodiac sign names\n */\nexport type ZodiacSign =\n    | 'Aries'\n    | 'Taurus'\n    | 'Gemini'\n    | 'Cancer'\n    | 'Leo'\n    | 'Virgo'\n    | 'Libra'\n    | 'Scorpio'\n    | 'Sagittarius'\n    | 'Capricorn'\n    | 'Aquarius'\n    | 'Pisces';\n\n/**\n * Planet and point names\n */\nexport type PlanetName =\n    | 'Sun'\n    | 'Moon'\n    | 'Mercury'\n    | 'Venus'\n    | 'Mars'\n    | 'Jupiter'\n    | 'Saturn'\n    | 'Uranus'\n    | 'Neptune'\n    | 'Pluto'\n    | 'NorthNode'\n    | 'SouthNode'\n    | 'Chiron'\n    | 'Lilith'\n    | 'Ascendant'\n    | 'Midheaven';\n\n/**\n * Aspect types between planets\n */\nexport type AspectType =\n    | 'conjunction'\n    | 'opposition'\n    | 'trine'\n    | 'square'\n    | 'sextile'\n    | 'quincunx'\n    | 'semisextile'\n    | 'semisquare'\n    | 'sesquiquadrate'\n    | 'quintile'\n    | 'biquintile';\n\n/**\n * A planet or point position in the chart\n */\nexport interface PlanetPosition {\n    /** Name of the planet or point */\n    planet: PlanetName;\n    /** Zodiac sign the planet is in */\n    sign: ZodiacSign;\n    /** Degree within the sign (0-30) */\n    degree: number;\n    /** Whether the planet is retrograde */\n    retrograde?: boolean;\n}\n\n/**\n * A house cusp in the chart\n */\nexport interface HousePosition {\n    /** House number (1-12) */\n    house: number;\n    /** Sign on the house cusp */\n    sign: ZodiacSign;\n    /** Degree of the cusp within the sign (0-30) */\n    degree: number;\n}\n\n/**\n * An aspect between two planets within a single chart\n */\nexport interface Aspect {\n    /** First planet in the aspect */\n    planet1: PlanetName;\n    /** Second planet in the aspect */\n    planet2: PlanetName;\n    /** Type of aspect */\n    aspect: AspectType;\n    /** Orb (deviation from exact aspect) in degrees */\n    orb: number;\n    /** Whether this is an applying or separating aspect */\n    applying?: boolean;\n}\n\n/**\n * An aspect between planets in two different charts (synastry)\n */\nexport interface SynastryAspect {\n    /** Planet from the first chart */\n    planet1: PlanetName;\n    /** Indicates which chart planet1 belongs to */\n    chart1Owner: 'chart1' | 'chart2';\n    /** Planet from the second chart */\n    planet2: PlanetName;\n    /** Indicates which chart planet2 belongs to */\n    chart2Owner: 'chart1' | 'chart2';\n    /** Type of aspect */\n    aspect: AspectType;\n    /** Orb (deviation from exact aspect) in degrees */\n    orb: number;\n}\n\n/**\n * Complete astrological chart data\n */\nexport interface AstrologicalChart {\n    /** Array of planet positions */\n    planets: PlanetPosition[];\n    /** Array of house cusps */\n    houses: HousePosition[];\n    /** Array of aspects within this chart */\n    aspects: Aspect[];\n    /** Optional label for the chart (e.g., person's name) */\n    label?: string;\n}\n\n/**\n * Birth data for a person\n */\nexport interface BirthData {\n    /** Person's name */\n    name?: string;\n    /** Birth date as string (e.g., \"July 16, 1984\" or \"16/07/1984\") */\n    date?: string;\n    /** Birth time as string (e.g., \"18:15\" or \"6:15 PM\") */\n    time?: string;\n    /** Birth location as string (e.g., \"Buenos Aires, Argentina\") */\n    location?: string;\n}\n\n// ============================================\n// Types compatible with circular-natal-horoscope-js\n// ============================================\n\n/**\n * ChartPosition structure from circular-natal-horoscope-js\n */\nexport interface HoroscopeChartPosition {\n    Ecliptic: {\n        DecimalDegrees: number;\n        ArcDegrees?: { degrees: number; minutes: number; seconds: number };\n        ArcDegreesFormatted?: string;\n        ArcDegreesFormatted30?: string;\n    };\n    Horizon?: {\n        DecimalDegrees: number;\n        ArcDegrees?: { degrees: number; minutes: number; seconds: number };\n        ArcDegreesFormatted?: string;\n        ArcDegreesFormatted30?: string;\n    };\n}\n\n/**\n * Sign structure from circular-natal-horoscope-js\n */\nexport interface HoroscopeSign {\n    key: string;\n    label: string;\n}\n\n/**\n * House structure from circular-natal-horoscope-js Houses array\n */\nexport interface HoroscopeHouse {\n    id: number;\n    label: string;\n    Sign: HoroscopeSign;\n    ChartPosition: {\n        StartPosition: HoroscopeChartPosition;\n        EndPosition: HoroscopeChartPosition;\n    };\n}\n\n/**\n * CelestialBody structure from circular-natal-horoscope-js\n */\nexport interface HoroscopeCelestialBody {\n    key: string;\n    label: string;\n    Sign: HoroscopeSign;\n    ChartPosition: HoroscopeChartPosition;\n    House?: { id: number; label: string };\n    isRetrograde?: boolean;\n}\n\n/**\n * CelestialPoint structure (northnode, southnode, lilith)\n */\nexport interface HoroscopeCelestialPoint {\n    key: string;\n    label: string;\n    Sign: HoroscopeSign;\n    ChartPosition: HoroscopeChartPosition;\n    House?: { id: number; label: string };\n}\n\n/**\n * Angle structure (Ascendant, Midheaven)\n */\nexport interface HoroscopeAngle {\n    key: string;\n    label: string;\n    Sign: HoroscopeSign;\n    ChartPosition: HoroscopeChartPosition;\n}\n\n/**\n * Aspect structure from circular-natal-horoscope-js\n */\nexport interface HoroscopeAspect {\n    point1Key: string;\n    point2Key: string;\n    aspectKey: string;\n    orb: number;\n    point1: HoroscopeCelestialBody | HoroscopeCelestialPoint | HoroscopeAngle;\n    point2: HoroscopeCelestialBody | HoroscopeCelestialPoint | HoroscopeAngle;\n}\n\n/**\n * Horoscope object from circular-natal-horoscope-js\n * This represents the result of new Horoscope({...})\n */\nexport interface HoroscopeResult {\n    Ascendant: HoroscopeAngle;\n    Midheaven: HoroscopeAngle;\n    Houses: HoroscopeHouse[];\n    CelestialBodies: {\n        all: HoroscopeCelestialBody[];\n        sun?: HoroscopeCelestialBody;\n        moon?: HoroscopeCelestialBody;\n        mercury?: HoroscopeCelestialBody;\n        venus?: HoroscopeCelestialBody;\n        mars?: HoroscopeCelestialBody;\n        jupiter?: HoroscopeCelestialBody;\n        saturn?: HoroscopeCelestialBody;\n        uranus?: HoroscopeCelestialBody;\n        neptune?: HoroscopeCelestialBody;\n        pluto?: HoroscopeCelestialBody;\n        chiron?: HoroscopeCelestialBody;\n    };\n    CelestialPoints: {\n        all: HoroscopeCelestialPoint[];\n        northnode?: HoroscopeCelestialPoint;\n        southnode?: HoroscopeCelestialPoint;\n        lilith?: HoroscopeCelestialPoint;\n    };\n    Aspects?: {\n        all: HoroscopeAspect[];\n        types?: Record<string, HoroscopeAspect[]>;\n        points?: Record<string, HoroscopeAspect[]>;\n    };\n}\n\n/**\n * Planet categories for orb configuration\n */\nexport type PlanetCategory = 'luminaries' | 'personal' | 'social' | 'transpersonal' | 'points' | 'angles';\n\n/**\n * Configuration for aspect orbs by planet category\n * \n * Default values:\n * - luminaries (Sun, Moon): 10\n * - personal (Mercury, Venus, Mars): 8\n * - social (Jupiter, Saturn): 6\n * - transpersonal (Uranus, Neptune, Pluto): 5\n * - points (Nodes, Chiron, Lilith): 5\n * - angles (Ascendant, Midheaven): 5\n */\nexport interface OrbConfiguration {\n    /** Orb for Sun and Moon (default: 10) */\n    luminaries?: number;\n    /** Orb for Mercury, Venus, Mars (default: 8) */\n    personal?: number;\n    /** Orb for Jupiter, Saturn (default: 6) */\n    social?: number;\n    /** Orb for Uranus, Neptune, Pluto (default: 5) */\n    transpersonal?: number;\n    /** Orb for Nodes, Chiron, Lilith (default: 5) */\n    points?: number;\n    /** Orb for Ascendant, Midheaven (default: 5) */\n    angles?: number;\n}\n\n/**\n * Default orb values by planet category\n */\nexport const DEFAULT_ORBS: Required<OrbConfiguration> = {\n    luminaries: 10,\n    personal: 8,\n    social: 6,\n    transpersonal: 5,\n    points: 5,\n    angles: 5,\n};\n\n/**\n * Map planets to their categories\n */\nexport const PLANET_CATEGORIES: Record<PlanetName, PlanetCategory> = {\n    Sun: 'luminaries',\n    Moon: 'luminaries',\n    Mercury: 'personal',\n    Venus: 'personal',\n    Mars: 'personal',\n    Jupiter: 'social',\n    Saturn: 'social',\n    Uranus: 'transpersonal',\n    Neptune: 'transpersonal',\n    Pluto: 'transpersonal',\n    NorthNode: 'points',\n    SouthNode: 'points',\n    Chiron: 'points',\n    Lilith: 'points',\n    Ascendant: 'angles',\n    Midheaven: 'angles',\n};\n\n/**\n * Colors for different aspect types\n */\nexport interface AspectColors {\n    conjunction?: string;\n    opposition?: string;\n    trine?: string;\n    square?: string;\n    sextile?: string;\n    quincunx?: string;\n    semisextile?: string;\n    semisquare?: string;\n    sesquiquadrate?: string;\n    quintile?: string;\n    biquintile?: string;\n}\n\n/**\n * Theme for the mandala\n */\nexport type MandalaTheme = 'light' | 'dark';\n\n/**\n * Supported languages\n */\nexport type MandalaLanguage = 'en' | 'es';\n\n/**\n * Props for the AstroMandala component\n */\nexport interface AstroMandalaProps {\n    /** Primary astrological chart */\n    chart: AstrologicalChart;\n    /** Secondary chart for synastry comparison */\n    secondChart?: AstrologicalChart;\n    /** Aspects between the two charts (for synastry) */\n    synastryAspects?: SynastryAspect[];\n    /** Size of the mandala in pixels */\n    size?: number;\n    /** Whether to show aspect lines */\n    showAspects?: boolean;\n    /** Whether to show degree numbers */\n    showDegrees?: boolean;\n    /** Whether to show house divisions */\n    showHouses?: boolean;\n    /** Whether to show second chart houses (synastry) */\n    showSecondChartHouses?: boolean;\n    /** Whether to show planet projection markers on the zodiac ring */\n    showPlanetProjections?: boolean;\n    /** Aspect types to display (if not provided, all aspects are shown) */\n    aspectTypesFilter?: AspectType[];\n    /** Whether to include AC, MC, DSC, IC in synastry aspects (default: false) */\n    includeAnglesInSynastry?: boolean;\n    /** Color for inner chart planets */\n    innerChartColor?: string;\n    /** Color for outer chart planets (synastry) */\n    outerChartColor?: string;\n    /** Custom colors for aspect lines */\n    aspectColors?: AspectColors;\n    /** Theme for the mandala (light or dark) */\n    theme?: MandalaTheme;\n    /** Language for labels (default: 'en') */\n    language?: MandalaLanguage;\n    /** Additional CSS class name */\n    className?: string;\n}\n","import {\n    AstrologicalChart,\n    PlanetPosition,\n    HousePosition,\n    Aspect,\n    ZodiacSign,\n    PlanetName,\n    AspectType,\n    HoroscopeResult,\n    HoroscopeCelestialBody,\n    HoroscopeCelestialPoint,\n    HoroscopeAngle,\n    HoroscopeHouse,\n    HoroscopeAspect,\n    OrbConfiguration,\n    DEFAULT_ORBS,\n    PLANET_CATEGORIES,\n    PlanetCategory,\n} from '../types';\n\n/**\n * Mapping from circular-natal-horoscope-js sign keys to ZodiacSign type\n */\nconst SIGN_KEY_MAP: Record<string, ZodiacSign> = {\n    aries: 'Aries',\n    taurus: 'Taurus',\n    gemini: 'Gemini',\n    cancer: 'Cancer',\n    leo: 'Leo',\n    virgo: 'Virgo',\n    libra: 'Libra',\n    scorpio: 'Scorpio',\n    sagittarius: 'Sagittarius',\n    capricorn: 'Capricorn',\n    aquarius: 'Aquarius',\n    pisces: 'Pisces',\n};\n\n/**\n * Mapping from circular-natal-horoscope-js body/point/angle keys to PlanetName type\n */\nconst PLANET_KEY_MAP: Record<string, PlanetName> = {\n    sun: 'Sun',\n    moon: 'Moon',\n    mercury: 'Mercury',\n    venus: 'Venus',\n    mars: 'Mars',\n    jupiter: 'Jupiter',\n    saturn: 'Saturn',\n    uranus: 'Uranus',\n    neptune: 'Neptune',\n    pluto: 'Pluto',\n    northnode: 'NorthNode',\n    southnode: 'SouthNode',\n    chiron: 'Chiron',\n    lilith: 'Lilith',\n    ascendant: 'Ascendant',\n    midheaven: 'Midheaven',\n};\n\n/**\n * Mapping from circular-natal-horoscope-js aspect keys to AspectType\n */\nconst ASPECT_KEY_MAP: Record<string, AspectType> = {\n    conjunction: 'conjunction',\n    opposition: 'opposition',\n    trine: 'trine',\n    square: 'square',\n    sextile: 'sextile',\n    quincunx: 'quincunx',\n    quintile: 'quintile',\n    septile: 'semisextile', // septile not supported, map to semisextile\n    'semi-square': 'semisquare',\n    'semi-sextile': 'semisextile',\n};\n\n/**\n * Convert a sign key from circular-natal-horoscope-js to ZodiacSign\n */\nfunction convertSignKey(key: string): ZodiacSign {\n    const normalizedKey = key.toLowerCase();\n    return SIGN_KEY_MAP[normalizedKey] || 'Aries';\n}\n\n/**\n * Convert a planet/point/angle key from circular-natal-horoscope-js to PlanetName\n */\nfunction convertPlanetKey(key: string): PlanetName | null {\n    const normalizedKey = key.toLowerCase();\n    return PLANET_KEY_MAP[normalizedKey] || null;\n}\n\n/**\n * Convert an aspect key from circular-natal-horoscope-js to AspectType\n */\nfunction convertAspectKey(key: string): AspectType | null {\n    const normalizedKey = key.toLowerCase();\n    return ASPECT_KEY_MAP[normalizedKey] || null;\n}\n\n/**\n * Calculate degree within sign (0-30) from ecliptic decimal degrees (0-360)\n */\nfunction getDegreeInSign(eclipticDegrees: number): number {\n    return eclipticDegrees % 30;\n}\n\n/**\n * Get zodiac sign from ecliptic degrees (0-360)\n */\nfunction getSignFromDegrees(eclipticDegrees: number): ZodiacSign {\n    const signs: ZodiacSign[] = [\n        'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo',\n        'Libra', 'Scorpio', 'Sagittarius', 'Capricorn', 'Aquarius', 'Pisces'\n    ];\n    const signIndex = Math.floor(eclipticDegrees / 30) % 12;\n    return signs[signIndex];\n}\n\n/**\n * Convert a CelestialBody from circular-natal-horoscope-js to PlanetPosition\n */\nfunction convertCelestialBody(body: HoroscopeCelestialBody): PlanetPosition | null {\n    const planetName = convertPlanetKey(body.key);\n    if (!planetName) return null;\n\n    const eclipticDegrees = body.ChartPosition.Ecliptic.DecimalDegrees;\n\n    return {\n        planet: planetName,\n        sign: body.Sign?.key ? convertSignKey(body.Sign.key) : getSignFromDegrees(eclipticDegrees),\n        degree: getDegreeInSign(eclipticDegrees),\n        retrograde: body.isRetrograde || false,\n    };\n}\n\n/**\n * Convert a CelestialPoint from circular-natal-horoscope-js to PlanetPosition\n */\nfunction convertCelestialPoint(point: HoroscopeCelestialPoint): PlanetPosition | null {\n    const planetName = convertPlanetKey(point.key);\n    if (!planetName) return null;\n\n    const eclipticDegrees = point.ChartPosition.Ecliptic.DecimalDegrees;\n\n    return {\n        planet: planetName,\n        sign: point.Sign?.key ? convertSignKey(point.Sign.key) : getSignFromDegrees(eclipticDegrees),\n        degree: getDegreeInSign(eclipticDegrees),\n    };\n}\n\n/**\n * Convert an Angle (Ascendant/Midheaven) from circular-natal-horoscope-js to PlanetPosition\n */\nfunction convertAngle(angle: HoroscopeAngle): PlanetPosition | null {\n    const planetName = convertPlanetKey(angle.key);\n    if (!planetName) return null;\n\n    const eclipticDegrees = angle.ChartPosition.Ecliptic.DecimalDegrees;\n\n    return {\n        planet: planetName,\n        sign: angle.Sign?.key ? convertSignKey(angle.Sign.key) : getSignFromDegrees(eclipticDegrees),\n        degree: getDegreeInSign(eclipticDegrees),\n    };\n}\n\n/**\n * Convert a House from circular-natal-horoscope-js to HousePosition\n */\nfunction convertHouse(house: HoroscopeHouse): HousePosition {\n    const eclipticDegrees = house.ChartPosition.StartPosition.Ecliptic.DecimalDegrees;\n\n    return {\n        house: house.id,\n        sign: house.Sign?.key ? convertSignKey(house.Sign.key) : getSignFromDegrees(eclipticDegrees),\n        degree: getDegreeInSign(eclipticDegrees),\n    };\n}\n\n/**\n * Convert an Aspect from circular-natal-horoscope-js to Aspect\n */\nfunction convertAspect(aspect: HoroscopeAspect): Aspect | null {\n    const planet1 = convertPlanetKey(aspect.point1Key);\n    const planet2 = convertPlanetKey(aspect.point2Key);\n    const aspectType = convertAspectKey(aspect.aspectKey);\n\n    if (!planet1 || !planet2 || !aspectType) return null;\n\n    return {\n        planet1,\n        planet2,\n        aspect: aspectType,\n        orb: aspect.orb,\n    };\n}\n\n/**\n * Convert a Horoscope result from circular-natal-horoscope-js to AstrologicalChart\n * \n * @param horoscope - The Horoscope object from circular-natal-horoscope-js\n * @param label - Optional label for the chart (e.g., person's name)\n * @returns AstrologicalChart compatible with astromandala components\n * \n * @example\n * ```typescript\n * import { Origin, Horoscope } from 'circular-natal-horoscope-js';\n * import { convertHoroscopeToChart, AstroMandala } from 'astromandala';\n * \n * const origin = new Origin({\n *   year: 1984, month: 7, date: 16,\n *   hour: 18, minute: 15,\n *   latitude: -34.6037, longitude: -58.3816,\n * });\n * \n * const horoscope = new Horoscope({\n *   origin,\n *   houseSystem: 'placidus',\n *   zodiac: 'tropical',\n *   aspectTypes: ['major', 'minor'],\n *   aspectPoints: ['bodies', 'points', 'angles'],\n *   aspectWithPoints: ['bodies', 'points', 'angles'],\n * });\n * \n * const chart = convertHoroscopeToChart(horoscope, 'John Doe');\n * // Now use chart with <AstroMandala chart={chart} />\n * ```\n */\nexport function convertHoroscopeToChart(\n    horoscope: HoroscopeResult,\n    label?: string\n): AstrologicalChart {\n    const planets: PlanetPosition[] = [];\n    const houses: HousePosition[] = [];\n    const aspects: Aspect[] = [];\n\n    // Convert CelestialBodies\n    if (horoscope.CelestialBodies?.all) {\n        for (const body of horoscope.CelestialBodies.all) {\n            const converted = convertCelestialBody(body);\n            if (converted) planets.push(converted);\n        }\n    }\n\n    // Convert CelestialPoints (NorthNode, SouthNode, Lilith)\n    if (horoscope.CelestialPoints?.all) {\n        for (const point of horoscope.CelestialPoints.all) {\n            const converted = convertCelestialPoint(point);\n            if (converted) planets.push(converted);\n        }\n    }\n\n    // Convert Ascendant\n    if (horoscope.Ascendant) {\n        const ascendant = convertAngle(horoscope.Ascendant);\n        if (ascendant) planets.push(ascendant);\n    }\n\n    // Convert Midheaven\n    if (horoscope.Midheaven) {\n        const midheaven = convertAngle(horoscope.Midheaven);\n        if (midheaven) planets.push(midheaven);\n    }\n\n    // Convert Houses\n    if (horoscope.Houses) {\n        for (const house of horoscope.Houses) {\n            houses.push(convertHouse(house));\n        }\n    }\n\n    // Convert Aspects\n    if (horoscope.Aspects?.all) {\n        for (const aspect of horoscope.Aspects.all) {\n            const converted = convertAspect(aspect);\n            if (converted) aspects.push(converted);\n        }\n    }\n\n    return {\n        label,\n        planets,\n        houses,\n        aspects,\n    };\n}\n\n/**\n * Aspect angles for each aspect type\n */\nconst ASPECT_ANGLES: Record<AspectType, number> = {\n    conjunction: 0,\n    opposition: 180,\n    trine: 120,\n    square: 90,\n    sextile: 60,\n    quincunx: 150,\n    semisextile: 30,\n    semisquare: 45,\n    sesquiquadrate: 135,\n    quintile: 72,\n    biquintile: 144,\n};\n\n/**\n * Check if an aspect should be skipped.\n * Currently skips opposition between North Node and South Node\n * since they are always in exact opposition by definition.\n */\nfunction shouldSkipAspect(\n    planet1: PlanetName,\n    planet2: PlanetName,\n    aspectType: AspectType\n): boolean {\n    // Skip North Node - South Node opposition (always exact by definition)\n    if (aspectType === 'opposition') {\n        const isNodePair =\n            (planet1 === 'NorthNode' && planet2 === 'SouthNode') ||\n            (planet1 === 'SouthNode' && planet2 === 'NorthNode');\n        if (isNodePair) return true;\n    }\n    return false;\n}\n\n/**\n * Get the orb for an aspect between two planets based on their categories.\n * Uses the average of both planets' orbs for the aspect calculation.\n * \n * @param planet1 - First planet name\n * @param planet2 - Second planet name\n * @param orbConfig - Custom orb configuration (optional)\n * @returns The orb to use for this aspect\n */\nexport function getOrbForPlanets(\n    planet1: PlanetName,\n    planet2: PlanetName,\n    orbConfig: OrbConfiguration = {}\n): number {\n    const config = { ...DEFAULT_ORBS, ...orbConfig };\n\n    const cat1 = PLANET_CATEGORIES[planet1];\n    const cat2 = PLANET_CATEGORIES[planet2];\n\n    const orb1 = config[cat1];\n    const orb2 = config[cat2];\n\n    // Use the average of both orbs\n    return (orb1 + orb2) / 2;\n}\n\n/**\n * Get planets with their ecliptic degrees from a Horoscope\n */\nfunction getPlanetsWithDegrees(horoscope: HoroscopeResult): Array<{ key: string; degrees: number }> {\n    const result: Array<{ key: string; degrees: number }> = [];\n\n    if (horoscope.CelestialBodies?.all) {\n        for (const body of horoscope.CelestialBodies.all) {\n            result.push({ key: body.key, degrees: body.ChartPosition.Ecliptic.DecimalDegrees });\n        }\n    }\n\n    if (horoscope.CelestialPoints?.all) {\n        for (const point of horoscope.CelestialPoints.all) {\n            result.push({ key: point.key, degrees: point.ChartPosition.Ecliptic.DecimalDegrees });\n        }\n    }\n\n    if (horoscope.Ascendant) {\n        result.push({ key: 'ascendant', degrees: horoscope.Ascendant.ChartPosition.Ecliptic.DecimalDegrees });\n    }\n\n    if (horoscope.Midheaven) {\n        result.push({ key: 'midheaven', degrees: horoscope.Midheaven.ChartPosition.Ecliptic.DecimalDegrees });\n    }\n\n    return result;\n}\n\n/**\n * Calculate synastry aspects between two Horoscope results\n * \n * @param horoscope1 - First Horoscope from circular-natal-horoscope-js\n * @param horoscope2 - Second Horoscope from circular-natal-horoscope-js\n * @param orbConfig - Custom orbs by planet category (optional)\n * @returns Array of SynastryAspect objects\n * \n * @example\n * ```typescript\n * // Using default orbs (Sun/Moon: 10, Personal: 8, etc.)\n * const aspects = calculateSynastryAspects(horoscope1, horoscope2);\n * \n * // Using custom orbs\n * const aspects = calculateSynastryAspects(horoscope1, horoscope2, {\n *   luminaries: 12,  // Sun, Moon\n *   personal: 10,    // Mercury, Venus, Mars\n *   transpersonal: 6 // Uranus, Neptune, Pluto\n * });\n * ```\n */\nexport function calculateSynastryAspects(\n    horoscope1: HoroscopeResult,\n    horoscope2: HoroscopeResult,\n    orbConfig: OrbConfiguration = {}\n): import('../types').SynastryAspect[] {\n    const synastryAspects: import('../types').SynastryAspect[] = [];\n\n    const planets1 = getPlanetsWithDegrees(horoscope1);\n    const planets2 = getPlanetsWithDegrees(horoscope2);\n\n    // Check each pair for aspects\n    for (const p1 of planets1) {\n        for (const p2 of planets2) {\n            const planet1 = convertPlanetKey(p1.key);\n            const planet2 = convertPlanetKey(p2.key);\n\n            if (!planet1 || !planet2) continue;\n\n            const diff = Math.abs(p1.degrees - p2.degrees);\n            const normalizedDiff = diff > 180 ? 360 - diff : diff;\n\n            // Get the orb based on both planets' categories\n            const maxOrb = getOrbForPlanets(planet1, planet2, orbConfig);\n\n            for (const [aspectType, angle] of Object.entries(ASPECT_ANGLES)) {\n                const aspectDiff = Math.abs(normalizedDiff - angle);\n\n                if (aspectDiff <= maxOrb) {\n                    // Skip certain aspects (e.g., North Node - South Node opposition)\n                    if (shouldSkipAspect(planet1, planet2, aspectType as AspectType)) {\n                        break;\n                    }\n                    synastryAspects.push({\n                        planet1,\n                        chart1Owner: 'chart1',\n                        planet2,\n                        chart2Owner: 'chart2',\n                        aspect: aspectType as AspectType,\n                        orb: aspectDiff,\n                    });\n                    break; // Only one aspect per pair\n                }\n            }\n        }\n    }\n\n    return synastryAspects;\n}\n\n/**\n * Calculate natal aspects within a single Horoscope\n * \n * This function calculates aspects between all planets in a single chart\n * using configurable orbs based on planet categories.\n * \n * @param horoscope - Horoscope from circular-natal-horoscope-js\n * @param orbConfig - Custom orbs by planet category (optional)\n * @param aspectTypes - Which aspect types to calculate (optional, defaults to all)\n * @returns Array of Aspect objects\n * \n * @example\n * ```typescript\n * // Calculate all aspects with default orbs\n * const aspects = calculateNatalAspects(horoscope);\n * \n * // Calculate only major aspects with tighter orbs\n * const aspects = calculateNatalAspects(horoscope, \n *   { luminaries: 8, personal: 6, transpersonal: 4 },\n *   ['conjunction', 'opposition', 'trine', 'square', 'sextile']\n * );\n * ```\n */\nexport function calculateNatalAspects(\n    horoscope: HoroscopeResult,\n    orbConfig: OrbConfiguration = {},\n    aspectTypes?: AspectType[]\n): Aspect[] {\n    const aspects: Aspect[] = [];\n    const planets = getPlanetsWithDegrees(horoscope);\n\n    const typesToCheck = aspectTypes || (Object.keys(ASPECT_ANGLES) as AspectType[]);\n\n    // Check each pair for aspects (avoid duplicates)\n    for (let i = 0; i < planets.length; i++) {\n        for (let j = i + 1; j < planets.length; j++) {\n            const p1 = planets[i];\n            const p2 = planets[j];\n\n            const planet1 = convertPlanetKey(p1.key);\n            const planet2 = convertPlanetKey(p2.key);\n\n            if (!planet1 || !planet2) continue;\n\n            const diff = Math.abs(p1.degrees - p2.degrees);\n            const normalizedDiff = diff > 180 ? 360 - diff : diff;\n\n            // Get the orb based on both planets' categories\n            const maxOrb = getOrbForPlanets(planet1, planet2, orbConfig);\n\n            for (const aspectType of typesToCheck) {\n                const angle = ASPECT_ANGLES[aspectType];\n                const aspectDiff = Math.abs(normalizedDiff - angle);\n\n                if (aspectDiff <= maxOrb) {\n                    // Skip certain aspects (e.g., North Node - South Node opposition)\n                    if (shouldSkipAspect(planet1, planet2, aspectType)) {\n                        break;\n                    }\n                    aspects.push({\n                        planet1,\n                        planet2,\n                        aspect: aspectType,\n                        orb: aspectDiff,\n                    });\n                    break; // Only one aspect per pair\n                }\n            }\n        }\n    }\n\n    return aspects;\n}\n","import React from 'react';\nimport { MandalaTheme } from '../../types';\nimport { ZODIAC_ORDER, ZODIAC_SYMBOLS, ELEMENT_COLORS, SIGN_ELEMENTS } from '../../constants';\nimport { getPointOnCircle, getMandalaAngle } from '../../utils';\n\ninterface ZodiacWheelProps {\n    centerX: number;\n    centerY: number;\n    outerRadius: number;\n    innerRadius: number;\n    ascendantDegree?: number;\n    theme?: MandalaTheme;\n}\n\n/**\n * Renders the zodiac sign wheel (outer ring of the mandala)\n */\nexport function ZodiacWheel({\n    centerX,\n    centerY,\n    outerRadius,\n    innerRadius,\n    ascendantDegree = 0,\n    theme = 'light',\n}: ZodiacWheelProps) {\n    const signArcAngle = 30; // Each sign spans 30 degrees\n    const middleRadius = (outerRadius + innerRadius) / 2;\n\n    const isDark = theme === 'dark';\n    const strokeColor = isDark ? '#555' : '#333';\n    const segmentStroke = isDark ? '#777' : '#666';\n    const markerColor = isDark ? '#666' : '#999';\n\n    return (\n        <g className=\"zodiac-wheel\">\n            {/* Outer circle */}\n            <circle\n                cx={centerX}\n                cy={centerY}\n                r={outerRadius}\n                fill=\"none\"\n                stroke={strokeColor}\n                strokeWidth={1}\n            />\n\n            {/* Inner circle */}\n            <circle\n                cx={centerX}\n                cy={centerY}\n                r={innerRadius}\n                fill=\"none\"\n                stroke={strokeColor}\n                strokeWidth={1}\n            />\n\n            {/* Sign segments */}\n            {ZODIAC_ORDER.map((sign, index) => {\n                const startDegree = index * signArcAngle;\n                const startAngle = getMandalaAngle(startDegree, ascendantDegree);\n                const endAngle = getMandalaAngle(startDegree + signArcAngle, ascendantDegree);\n\n                // Calculate positions for the segment\n                const outerStart = getPointOnCircle(centerX, centerY, outerRadius, startAngle);\n                const outerEnd = getPointOnCircle(centerX, centerY, outerRadius, endAngle);\n                const innerStart = getPointOnCircle(centerX, centerY, innerRadius, startAngle);\n                const innerEnd = getPointOnCircle(centerX, centerY, innerRadius, endAngle);\n\n                // Symbol position at middle of segment\n                const symbolAngle = getMandalaAngle(startDegree + signArcAngle / 2, ascendantDegree);\n                const symbolPos = getPointOnCircle(centerX, centerY, middleRadius, symbolAngle);\n\n                const element = SIGN_ELEMENTS[sign];\n                const baseColor = ELEMENT_COLORS[element];\n                const fillColor = isDark ? baseColor + '40' : baseColor + '30'; // More opacity in dark mode\n\n                // Create the arc segment path\n                const pathD = `\n          M ${outerStart.x} ${outerStart.y}\n          A ${outerRadius} ${outerRadius} 0 0 0 ${outerEnd.x} ${outerEnd.y}\n          L ${innerEnd.x} ${innerEnd.y}\n          A ${innerRadius} ${innerRadius} 0 0 1 ${innerStart.x} ${innerStart.y}\n          Z\n        `;\n\n                return (\n                    <g key={sign} className={`sign-segment sign-${sign.toLowerCase()}`}>\n                        {/* Segment background */}\n                        <path\n                            d={pathD}\n                            fill={fillColor}\n                            stroke={segmentStroke}\n                            strokeWidth={0.5}\n                        />\n\n                        {/* Sign symbol */}\n                        <text\n                            x={symbolPos.x}\n                            y={symbolPos.y}\n                            textAnchor=\"middle\"\n                            dominantBaseline=\"central\"\n                            fontSize={outerRadius * 0.08}\n                            fill={ELEMENT_COLORS[element]}\n                            fontWeight=\"bold\"\n                            style={{\n                                fontFamily: 'Segoe UI Symbol, Symbola, sans-serif',\n                            }}\n                        >\n                            {ZODIAC_SYMBOLS[sign]}&#xFE0E;\n                        </text>\n                    </g>\n                );\n            })}\n\n            {/* Degree markers (every 5 degrees) */}\n            {Array.from({ length: 72 }, (_, i) => {\n                const degree = i * 5;\n                const angle = getMandalaAngle(degree, ascendantDegree);\n                const isMainDivision = degree % 30 === 0;\n                const markerLength = isMainDivision ? (outerRadius - innerRadius) * 0.5 : (outerRadius - innerRadius) * 0.2;\n\n                const outer = getPointOnCircle(centerX, centerY, innerRadius, angle);\n                const inner = getPointOnCircle(centerX, centerY, innerRadius - markerLength, angle);\n\n                return (\n                    <line\n                        key={`marker-${degree}`}\n                        x1={outer.x}\n                        y1={outer.y}\n                        x2={inner.x}\n                        y2={inner.y}\n                        stroke={markerColor}\n                        strokeWidth={isMainDivision ? 1 : 0.5}\n                    />\n                );\n            })}\n        </g>\n    );\n}\n","import React from 'react';\nimport { HousePosition, MandalaTheme } from '../../types';\nimport { getPointOnCircle, getMandalaAngle, getAbsoluteDegree } from '../../utils';\n\ninterface HouseWheelProps {\n    centerX: number;\n    centerY: number;\n    outerRadius: number;\n    innerRadius: number;\n    houses: HousePosition[];\n    ascendantDegree?: number;\n    isSecondChart?: boolean;\n    color?: string;\n    theme?: MandalaTheme;\n}\n\n/**\n * Angle labels for the four cardinal points\n */\nconst ANGLE_LABELS: Record<number, string> = {\n    1: 'AS',\n    4: 'IC',\n    7: 'DS',\n    10: 'MC',\n};\n\n/**\n * Renders the house divisions on the chart\n */\nexport function HouseWheel({\n    centerX,\n    centerY,\n    outerRadius,\n    innerRadius,\n    houses,\n    ascendantDegree = 0,\n    isSecondChart = false,\n    color,\n    theme = 'light',\n}: HouseWheelProps) {\n    // Sort houses by number\n    const sortedHouses = [...houses].sort((a, b) => a.house - b.house);\n\n    const isDark = theme === 'dark';\n\n    // Colors for second chart and theme\n    const lineColor = isSecondChart ? (color || '#d94a4a') : (isDark ? '#ddd' : '#000');\n    const textColor = isSecondChart ? (color || '#d94a4a') : (isDark ? '#bbb' : '#555');\n    const angleLabelColor = isDark ? '#fff' : '#000';\n    const nonAngularLineColor = isDark ? '#666' : '#999';\n\n    return (\n        <g className={`house-wheel ${isSecondChart ? 'house-wheel-second' : ''}`}>\n            {sortedHouses.map((house, index) => {\n                const houseDegree = getAbsoluteDegree(house.sign, house.degree);\n                const angle = getMandalaAngle(houseDegree, ascendantDegree);\n\n                // Line from inner to outer radius\n                const outer = getPointOnCircle(centerX, centerY, outerRadius, angle);\n                const inner = getPointOnCircle(centerX, centerY, innerRadius, angle);\n\n                // House number position\n                const nextHouse = sortedHouses[(index + 1) % 12];\n                const nextHouseDegree = getAbsoluteDegree(nextHouse.sign, nextHouse.degree);\n\n                // Calculate middle of house for number placement\n                let midDegree = (houseDegree + nextHouseDegree) / 2;\n                if (nextHouseDegree < houseDegree) {\n                    midDegree = ((houseDegree + nextHouseDegree + 360) / 2) % 360;\n                }\n\n                const numberAngle = getMandalaAngle(midDegree, ascendantDegree);\n                const numberRadius = innerRadius * 0.70; // Moved further inside\n                const numberPos = getPointOnCircle(centerX, centerY, numberRadius, numberAngle);\n\n                const isAngularHouse = [1, 4, 7, 10].includes(house.house);\n                const angleLabel = ANGLE_LABELS[house.house];\n\n                // Position for angle label (ASC, MC, DSC, IC)\n                // For second chart, place labels slightly inside; for primary, slightly outside\n                const labelRadius = isSecondChart ? innerRadius * 0.92 : outerRadius * 1.02;\n                const labelPos = getPointOnCircle(centerX, centerY, labelRadius, angle);\n\n                return (\n                    <g key={`house-${house.house}${isSecondChart ? '-second' : ''}`} className={`house-division house-${house.house}`}>\n                        {/* House cusp line */}\n                        <line\n                            x1={outer.x}\n                            y1={outer.y}\n                            x2={inner.x}\n                            y2={inner.y}\n                            stroke={isSecondChart ? lineColor : (isAngularHouse ? lineColor : nonAngularLineColor)}\n                            strokeWidth={isAngularHouse ? (isSecondChart ? 1.5 : 2) : 0.5}\n                            strokeDasharray={isSecondChart ? '4,2' : (isAngularHouse ? undefined : '2,2')}\n                            opacity={isSecondChart ? 0.7 : 1}\n                        />\n\n                        {/* House number */}\n                        <text\n                            x={numberPos.x}\n                            y={numberPos.y}\n                            textAnchor=\"middle\"\n                            dominantBaseline=\"central\"\n                            fontSize={outerRadius * 0.055}\n                            fill={textColor}\n                            fontWeight={isAngularHouse ? 'bold' : 'normal'}\n                        >\n                            {house.house}\n                        </text>\n\n                        {/* Angle label (AS, MC, DS, IC) */}\n                        {angleLabel && (\n                            <text\n                                x={labelPos.x}\n                                y={labelPos.y}\n                                textAnchor=\"middle\"\n                                dominantBaseline=\"central\"\n                                fontSize={outerRadius * (isSecondChart ? 0.05 : 0.06)}\n                                fill={angleLabelColor}\n                                fontWeight=\"bold\"\n                                opacity={isSecondChart ? 0.85 : 1}\n                            >\n                                {angleLabel}\n                            </text>\n                        )}\n\n                        {/* Inner circle line for second chart ring */}\n                        {isSecondChart && index === 0 && (\n                            <circle\n                                cx={centerX}\n                                cy={centerY}\n                                r={innerRadius}\n                                fill=\"none\"\n                                stroke={lineColor}\n                                strokeWidth={0.5}\n                                opacity={0.5}\n                            />\n                        )}\n                    </g>\n                );\n            })}\n        </g>\n    );\n}\n","import React from 'react';\nimport { PlanetPosition, MandalaTheme } from '../../types';\nimport { PLANET_SYMBOLS } from '../../constants';\nimport {\n    getPointOnCircle,\n    getMandalaAngle,\n    getPlanetAbsoluteDegree,\n    formatDegree,\n    adjustPlanetPositions,\n} from '../../utils';\n\ninterface PlanetDisplayProps {\n    centerX: number;\n    centerY: number;\n    radius: number;\n    planets: PlanetPosition[];\n    ascendantDegree?: number;\n    color?: string;\n    showDegrees?: boolean;\n    isOuter?: boolean;\n    theme?: MandalaTheme;\n}\n\n/**\n * Renders planets on the chart\n */\nexport function PlanetDisplay({\n    centerX,\n    centerY,\n    radius,\n    planets,\n    ascendantDegree = 0,\n    color = '#4a90d9',\n    showDegrees = false,\n    isOuter = false,\n    theme = 'light',\n}: PlanetDisplayProps) {\n    const isDark = theme === 'dark';\n    const offsetLineColor = isDark ? '#555' : '#ccc';\n\n    // Filter out Ascendant and Midheaven as they are already shown in HouseWheel as ASC/MC labels\n    const filteredPlanets = planets.filter(\n        (planet) => planet.planet !== 'Ascendant' && planet.planet !== 'Midheaven'\n    );\n\n    // Calculate absolute degrees for all planets\n    const planetsWithDegrees = filteredPlanets.map((planet) => ({\n        planet,\n        absoluteDegree: getPlanetAbsoluteDegree(planet),\n    }));\n\n    // Adjust positions to avoid overlapping (including angle labels)\n    const adjustedPlanets = adjustPlanetPositions(planetsWithDegrees, 8, ascendantDegree);\n\n    // Different radii for inner and outer chart planets\n    // Inner planets are placed between zodiac ring and house numbers\n    const planetRadius = isOuter ? radius * 1.08 : radius * 0.88;\n    const lineRadius = isOuter ? radius * 1.0 : radius * 0.95;\n    const degreeRadius = isOuter ? radius * 1.18 : radius * 0.78;\n\n    return (\n        <g className={`planets ${isOuter ? 'outer-planets' : 'inner-planets'}`}>\n            {adjustedPlanets.map(({ planet, absoluteDegree, offset }) => {\n                // Actual position (for aspect lines)\n                const actualAngle = getMandalaAngle(absoluteDegree, ascendantDegree);\n                const actualPos = getPointOnCircle(centerX, centerY, lineRadius, actualAngle);\n\n                // Displayed position (with offset to avoid overlaps)\n                const displayAngle = getMandalaAngle(absoluteDegree + offset, ascendantDegree);\n                const symbolPos = getPointOnCircle(centerX, centerY, planetRadius, displayAngle);\n                const degreePos = getPointOnCircle(centerX, centerY, degreeRadius, displayAngle);\n\n                const symbol = PLANET_SYMBOLS[planet.planet];\n                const isAngle = planet.planet === 'Ascendant' || planet.planet === 'Midheaven';\n                const fontSize = isAngle ? radius * 0.09 : radius * 0.14;\n\n                return (\n                    <g\n                        key={planet.planet}\n                        className={`planet planet-${planet.planet.toLowerCase()}`}\n                        data-degree={absoluteDegree}\n                        data-actual-x={actualPos.x}\n                        data-actual-y={actualPos.y}\n                    >\n                        {/* Line connecting actual position to symbol if offset */}\n                        {Math.abs(offset) > 2 && (\n                            <>\n                                {/* Small marker at actual position */}\n                                <circle\n                                    cx={actualPos.x}\n                                    cy={actualPos.y}\n                                    r={2}\n                                    fill={color}\n                                    opacity={0.6}\n                                />\n                                {/* Connection line */}\n                                <line\n                                    x1={actualPos.x}\n                                    y1={actualPos.y}\n                                    x2={symbolPos.x}\n                                    y2={symbolPos.y}\n                                    stroke={color}\n                                    strokeWidth={0.75}\n                                    strokeDasharray=\"3,2\"\n                                    opacity={0.5}\n                                />\n                            </>\n                        )}\n\n                        {/* Planet symbol */}\n                        <text\n                            x={symbolPos.x}\n                            y={symbolPos.y}\n                            textAnchor=\"middle\"\n                            dominantBaseline=\"central\"\n                            fontSize={fontSize}\n                            fill={color}\n                            fontWeight={isAngle ? 'bold' : 'normal'}\n                            style={{\n                                fontFamily: 'Segoe UI Symbol, Symbola, sans-serif',\n                            }}\n                        >\n                            {symbol}&#xFE0E;\n                        </text>\n\n                        {/* Retrograde symbol - positioned below/beside to avoid collisions */}\n                        {planet.retrograde && (\n                            <text\n                                x={symbolPos.x + fontSize * 0.45}\n                                y={symbolPos.y - fontSize * 0.35}\n                                textAnchor=\"start\"\n                                dominantBaseline=\"central\"\n                                fontSize={fontSize * 0.32}\n                                fill={color}\n                                opacity={0.9}\n                                style={{\n                                    fontFamily: 'Segoe UI Symbol, Symbola, sans-serif',\n                                }}\n                            >\n                                R\n                            </text>\n                        )}\n\n                        {/* Degree display */}\n                        {showDegrees && (\n                            <text\n                                x={degreePos.x}\n                                y={degreePos.y}\n                                textAnchor=\"middle\"\n                                dominantBaseline=\"central\"\n                                fontSize={fontSize * 0.35}\n                                fill={color}\n                                opacity={0.8}\n                            >\n                                {formatDegree(planet.degree)}\n                            </text>\n                        )}\n                    </g>\n                );\n            })}\n        </g>\n    );\n}\n","import React from 'react';\nimport { Aspect, SynastryAspect, PlanetPosition, AspectColors } from '../../types';\nimport { DEFAULT_ASPECT_COLORS, ASPECT_LINE_STYLES } from '../../constants';\nimport {\n    getPointOnCircle,\n    getMandalaAngle,\n    getPlanetAbsoluteDegree,\n} from '../../utils';\n\ninterface AspectLinesProps {\n    centerX: number;\n    centerY: number;\n    radius: number;\n    aspects?: Aspect[];\n    synastryAspects?: SynastryAspect[];\n    planets: PlanetPosition[];\n    secondChartPlanets?: PlanetPosition[];\n    ascendantDegree?: number;\n    aspectColors?: AspectColors;\n    /** Whether to include AC, MC, DSC, IC in synastry aspects */\n    includeAnglesInSynastry?: boolean;\n}\n\n/** Angle points to filter from synastry aspects */\nconst ANGLE_POINTS = ['Ascendant', 'Midheaven'];\n\n/**\n * Check if an aspect should be skipped from rendering.\n * Skips North Node - South Node opposition since it's always exact by definition.\n */\nfunction shouldSkipAspect(planet1: string, planet2: string, aspectType: string): boolean {\n    if (aspectType === 'opposition') {\n        const isNodePair =\n            (planet1 === 'NorthNode' && planet2 === 'SouthNode') ||\n            (planet1 === 'SouthNode' && planet2 === 'NorthNode');\n        if (isNodePair) return true;\n    }\n    return false;\n}\n\n/**\n * Helper to find planet position\n */\nfunction findPlanet(planets: PlanetPosition[], name: string): PlanetPosition | undefined {\n    return planets.find((p) => p.planet === name);\n}\n\n/**\n * Renders aspect lines between planets\n */\nexport function AspectLines({\n    centerX,\n    centerY,\n    radius,\n    aspects = [],\n    synastryAspects = [],\n    planets,\n    secondChartPlanets = [],\n    ascendantDegree = 0,\n    aspectColors = {},\n    includeAnglesInSynastry = false,\n}: AspectLinesProps) {\n    const colors = { ...DEFAULT_ASPECT_COLORS, ...aspectColors };\n    const aspectRadius = radius * 0.7; // Draw aspects in inner area\n\n    // Filter natal aspects to exclude angles if configured and skip NorthNode-SouthNode opposition\n    const filteredNatalAspects = aspects\n        .filter((a) => !shouldSkipAspect(a.planet1, a.planet2, a.aspect))\n        .filter((a) => includeAnglesInSynastry || (!ANGLE_POINTS.includes(a.planet1) && !ANGLE_POINTS.includes(a.planet2)));\n\n    // Filter synastry aspects to exclude angles if configured and skip NorthNode-SouthNode opposition\n    const filteredSynastryAspects = synastryAspects\n        .filter((a) => !shouldSkipAspect(a.planet1, a.planet2, a.aspect))\n        .filter((a) => includeAnglesInSynastry || (!ANGLE_POINTS.includes(a.planet1) && !ANGLE_POINTS.includes(a.planet2)));\n\n    // Helper to get planet coordinates\n    const getPlanetCoords = (planetName: string, isSecondChart: boolean = false) => {\n        const planetList = isSecondChart ? secondChartPlanets : planets;\n        const planet = findPlanet(planetList, planetName);\n\n        if (!planet) return null;\n\n        const absoluteDegree = getPlanetAbsoluteDegree(planet);\n        const angle = getMandalaAngle(absoluteDegree, ascendantDegree);\n        return getPointOnCircle(centerX, centerY, aspectRadius, angle);\n    };\n\n    return (\n        <g className=\"aspect-lines\">\n            {/* Natal aspects (within single chart) */}\n            {filteredNatalAspects.map((aspect, index) => {\n                const pos1 = getPlanetCoords(aspect.planet1);\n                const pos2 = getPlanetCoords(aspect.planet2);\n\n                if (!pos1 || !pos2) return null;\n\n                const color = colors[aspect.aspect];\n                const style = ASPECT_LINE_STYLES[aspect.aspect];\n\n                // Calculate opacity based on orb (tighter orb = more opaque)\n                const maxOrb = 10;\n                const opacity = Math.max(0.3, 1 - aspect.orb / maxOrb);\n\n                return (\n                    <line\n                        key={`natal-${index}-${aspect.planet1}-${aspect.planet2}`}\n                        x1={pos1.x}\n                        y1={pos1.y}\n                        x2={pos2.x}\n                        y2={pos2.y}\n                        stroke={color}\n                        strokeWidth={style.strokeWidth}\n                        strokeDasharray={style.dashArray}\n                        opacity={opacity}\n                        className={`aspect-line aspect-${aspect.aspect}`}\n                    />\n                );\n            })}\n\n            {/* Synastry aspects (between two charts) */}\n            {filteredSynastryAspects.map((aspect, index) => {\n                const isP1SecondChart = aspect.chart1Owner === 'chart2';\n                const isP2SecondChart = aspect.chart2Owner === 'chart2';\n\n                const pos1 = getPlanetCoords(aspect.planet1, isP1SecondChart);\n                const pos2 = getPlanetCoords(aspect.planet2, isP2SecondChart);\n\n                if (!pos1 || !pos2) return null;\n\n                const color = colors[aspect.aspect];\n                const style = ASPECT_LINE_STYLES[aspect.aspect];\n\n                // Calculate opacity based on orb\n                const maxOrb = 10;\n                const opacity = Math.max(0.3, 1 - aspect.orb / maxOrb);\n\n                return (\n                    <line\n                        key={`synastry-${index}-${aspect.planet1}-${aspect.planet2}`}\n                        x1={pos1.x}\n                        y1={pos1.y}\n                        x2={pos2.x}\n                        y2={pos2.y}\n                        stroke={color}\n                        strokeWidth={style.strokeWidth * 1.2}\n                        strokeDasharray={style.dashArray}\n                        opacity={opacity}\n                        className={`aspect-line synastry-aspect aspect-${aspect.aspect}`}\n                    />\n                );\n            })}\n        </g>\n    );\n}\n","import React from 'react';\nimport { PlanetPosition } from '../../types';\nimport { getPointOnCircle, getMandalaAngle, getAbsoluteDegree } from '../../utils';\n\ninterface PlanetProjectionsProps {\n    centerX: number;\n    centerY: number;\n    outerRadius: number;\n    innerRadius: number;\n    planets: PlanetPosition[];\n    secondChartPlanets?: PlanetPosition[];\n    ascendantDegree?: number;\n    innerChartColor?: string;\n    outerChartColor?: string;\n}\n\n/**\n * Renders small tick marks on the zodiac ring showing where planets project\n */\nexport function PlanetProjections({\n    centerX,\n    centerY,\n    outerRadius,\n    innerRadius,\n    planets,\n    secondChartPlanets,\n    ascendantDegree = 0,\n    innerChartColor = '#4a90d9',\n    outerChartColor = '#d94a4a',\n}: PlanetProjectionsProps) {\n    const tickLength = (outerRadius - innerRadius) * 0.3;\n\n    // Filter out Ascendant and Midheaven as they are already shown\n    const filteredPlanets = planets.filter(\n        (p) => p.planet !== 'Ascendant' && p.planet !== 'Midheaven'\n    );\n    const filteredSecondPlanets = secondChartPlanets?.filter(\n        (p) => p.planet !== 'Ascendant' && p.planet !== 'Midheaven'\n    );\n\n    const renderProjection = (\n        planet: PlanetPosition,\n        color: string,\n        isOuter: boolean,\n        key: string\n    ) => {\n        const absoluteDegree = getAbsoluteDegree(planet.sign, planet.degree);\n        const angle = getMandalaAngle(absoluteDegree, ascendantDegree);\n\n        // Position ticks from inner edge of zodiac ring\n        const startRadius = innerRadius;\n        const endRadius = innerRadius + tickLength;\n\n        const start = getPointOnCircle(centerX, centerY, startRadius, angle);\n        const end = getPointOnCircle(centerX, centerY, endRadius, angle);\n\n        return (\n            <line\n                key={key}\n                x1={start.x}\n                y1={start.y}\n                x2={end.x}\n                y2={end.y}\n                stroke={color}\n                strokeWidth={2}\n                opacity={0.8}\n            />\n        );\n    };\n\n    return (\n        <g className=\"planet-projections\">\n            {/* Primary chart planet projections */}\n            {filteredPlanets.map((planet, index) =>\n                renderProjection(planet, innerChartColor, false, `proj-1-${index}`)\n            )}\n\n            {/* Secondary chart planet projections */}\n            {filteredSecondPlanets?.map((planet, index) =>\n                renderProjection(planet, outerChartColor, true, `proj-2-${index}`)\n            )}\n        </g>\n    );\n}\n","'use client';\n\nimport React, { useMemo } from 'react';\nimport { AstroMandalaProps } from '../../types';\nimport { ZodiacWheel } from '../ZodiacWheel';\nimport { HouseWheel } from '../HouseWheel';\nimport { PlanetDisplay } from '../PlanetDisplay';\nimport { AspectLines } from '../AspectLines';\nimport { PlanetProjections } from '../PlanetProjections';\nimport { getAbsoluteDegree } from '../../utils';\n\n/**\n * AstroMandala - Astrological chart visualization component\n * \n * Displays a single natal chart or two charts overlapping (synastry).\n * The chart shows the zodiac wheel, house divisions, planet positions,\n * and aspect lines between planets.\n */\nexport function AstroMandala({\n    chart,\n    secondChart,\n    synastryAspects,\n    size = 500,\n    showAspects = true,\n    showDegrees = false,\n    showHouses = true,\n    showSecondChartHouses = false,\n    showPlanetProjections = true,\n    aspectTypesFilter,\n    includeAnglesInSynastry = false,\n    innerChartColor = '#4a90d9',\n    outerChartColor = '#d94a4a',\n    aspectColors,\n    theme = 'light',\n    className,\n}: AstroMandalaProps) {\n    const centerX = size / 2;\n    const centerY = size / 2;\n\n    // Theme colors\n    const isDark = theme === 'dark';\n    const colors = {\n        background: isDark ? '#1a1a2e' : '#fafafa',\n        backgroundStroke: isDark ? '#333' : '#ddd',\n        centerFill: isDark ? '#16162a' : '#fff',\n        centerStroke: isDark ? '#444' : '#ccc',\n        text: isDark ? '#e0e0e0' : '#333',\n        textSecondary: isDark ? '#aaa' : '#555',\n        line: isDark ? '#555' : '#999',\n    };\n\n    // Calculate radii for different rings\n    // In synastry mode with both houses shown, we need extra rings\n    const isSynastry = Boolean(secondChart);\n    const showBothHouses = showSecondChartHouses && isSynastry && secondChart;\n\n    const outerRadius = size * 0.45;\n    const zodiacInnerRadius = size * 0.38;\n\n    // When showing both house systems, we need two house rings\n    const outerHouseRingOuter = zodiacInnerRadius;\n    const outerHouseRingInner = showBothHouses ? size * 0.30 : size * 0.15;\n    const innerHouseRingOuter = showBothHouses ? size * 0.30 : size * 0.15;\n    const innerHouseRingInner = showBothHouses ? size * 0.22 : size * 0.15;\n\n    const planetRadius = showBothHouses ? size * 0.26 : size * 0.32;\n    const houseInnerRadius = showBothHouses ? size * 0.22 : size * 0.15;\n    const centerCircleRadius = showBothHouses ? size * 0.12 : size * 0.15;\n\n    // Get Ascendant degree for chart orientation\n    const ascendantDegree = useMemo(() => {\n        const ascendant = chart.planets.find((p) => p.planet === 'Ascendant');\n        if (ascendant) {\n            return getAbsoluteDegree(ascendant.sign, ascendant.degree);\n        }\n        // If no Ascendant, use first house cusp\n        const firstHouse = chart.houses.find((h) => h.house === 1);\n        if (firstHouse) {\n            return getAbsoluteDegree(firstHouse.sign, firstHouse.degree);\n        }\n        return 0;\n    }, [chart.planets, chart.houses]);\n\n    // Filter aspects by type if filter is provided\n    const filteredChartAspects = useMemo(() => {\n        if (!aspectTypesFilter || aspectTypesFilter.length === 0) {\n            return chart.aspects;\n        }\n        return chart.aspects.filter((a) => aspectTypesFilter.includes(a.aspect));\n    }, [chart.aspects, aspectTypesFilter]);\n\n    const filteredSynastryAspects = useMemo(() => {\n        if (!synastryAspects) return undefined;\n        if (!aspectTypesFilter || aspectTypesFilter.length === 0) {\n            return synastryAspects;\n        }\n        return synastryAspects.filter((a) => aspectTypesFilter.includes(a.aspect));\n    }, [synastryAspects, aspectTypesFilter]);\n\n    return (\n        <svg\n            width={size}\n            height={size}\n            viewBox={`0 0 ${size} ${size}`}\n            className={className}\n            style={{\n                fontFamily: 'Arial, sans-serif',\n                maxWidth: '100%',\n                height: 'auto',\n                display: 'block',\n                overflow: 'visible',\n                // Prevent external CSS from affecting the SVG\n                contain: 'layout style',\n            }}\n            // Ensure SVG maintains aspect ratio\n            preserveAspectRatio=\"xMidYMid meet\"\n        >\n            {/* Background */}\n            <circle\n                cx={centerX}\n                cy={centerY}\n                r={outerRadius + 5}\n                fill={colors.background}\n                stroke={colors.backgroundStroke}\n                strokeWidth={1}\n            />\n\n            {/* Center circle */}\n            <circle\n                cx={centerX}\n                cy={centerY}\n                r={centerCircleRadius}\n                fill={colors.centerFill}\n                stroke={colors.centerStroke}\n                strokeWidth={0.5}\n            />\n\n            {/* Zodiac wheel */}\n            <ZodiacWheel\n                centerX={centerX}\n                centerY={centerY}\n                outerRadius={outerRadius}\n                innerRadius={zodiacInnerRadius}\n                ascendantDegree={ascendantDegree}\n                theme={theme}\n            />\n\n            {/* Planet projection markers on zodiac ring */}\n            {showPlanetProjections && (\n                <PlanetProjections\n                    centerX={centerX}\n                    centerY={centerY}\n                    outerRadius={outerRadius}\n                    innerRadius={zodiacInnerRadius}\n                    planets={chart.planets}\n                    secondChartPlanets={secondChart?.planets}\n                    ascendantDegree={ascendantDegree}\n                    innerChartColor={innerChartColor}\n                    outerChartColor={outerChartColor}\n                />\n            )}\n\n            {/* House divisions - primary chart (outer ring) */}\n            {showHouses && chart.houses.length > 0 && (\n                <HouseWheel\n                    centerX={centerX}\n                    centerY={centerY}\n                    outerRadius={outerHouseRingOuter}\n                    innerRadius={outerHouseRingInner}\n                    houses={chart.houses}\n                    ascendantDegree={ascendantDegree}\n                    theme={theme}\n                />\n            )}\n\n            {/* House divisions - second chart (inner ring for synastry) */}\n            {showSecondChartHouses && showBothHouses && secondChart.houses.length > 0 && (\n                <HouseWheel\n                    centerX={centerX}\n                    centerY={centerY}\n                    outerRadius={innerHouseRingOuter}\n                    innerRadius={innerHouseRingInner}\n                    houses={secondChart.houses}\n                    ascendantDegree={ascendantDegree}\n                    isSecondChart={true}\n                    color={outerChartColor}\n                    theme={theme}\n                />\n            )}\n\n            {/* Aspect lines */}\n            {showAspects && (\n                <AspectLines\n                    centerX={centerX}\n                    centerY={centerY}\n                    radius={planetRadius}\n                    aspects={filteredChartAspects}\n                    synastryAspects={filteredSynastryAspects}\n                    planets={chart.planets}\n                    secondChartPlanets={secondChart?.planets}\n                    ascendantDegree={ascendantDegree}\n                    aspectColors={aspectColors}\n                    includeAnglesInSynastry={includeAnglesInSynastry}\n                />\n            )}\n\n            {/* Primary chart planets */}\n            <PlanetDisplay\n                centerX={centerX}\n                centerY={centerY}\n                radius={planetRadius}\n                planets={chart.planets}\n                ascendantDegree={ascendantDegree}\n                color={innerChartColor}\n                showDegrees={showDegrees}\n                isOuter={false}\n                theme={theme}\n            />\n\n            {/* Secondary chart planets (synastry) */}\n            {isSynastry && secondChart && (\n                <PlanetDisplay\n                    centerX={centerX}\n                    centerY={centerY}\n                    radius={planetRadius}\n                    planets={secondChart.planets}\n                    ascendantDegree={ascendantDegree}\n                    color={outerChartColor}\n                    showDegrees={showDegrees}\n                    isOuter={true}\n                    theme={theme}\n                />\n            )}\n        </svg>\n    );\n}\n","'use client';\n\nimport React, { useMemo } from 'react';\nimport { AstrologicalChart, MandalaTheme, MandalaLanguage, PlanetName, ZodiacSign, PlanetPosition, HousePosition } from '../../types';\nimport { ZODIAC_SYMBOLS, PLANET_SYMBOLS, SIGN_ELEMENTS, getTranslations } from '../../constants';\n\ninterface ChartInfoPanelProps {\n    chart: AstrologicalChart;\n    secondChart?: AstrologicalChart;\n    theme?: MandalaTheme;\n    language?: MandalaLanguage;\n    showHouses?: boolean;\n    showElements?: boolean;\n    className?: string;\n}\n\n// Planet names translations\nconst PLANET_NAMES: Record<MandalaLanguage, Record<PlanetName, string>> = {\n    en: {\n        Sun: 'Sun', Moon: 'Moon', Mercury: 'Mercury', Venus: 'Venus', Mars: 'Mars',\n        Jupiter: 'Jupiter', Saturn: 'Saturn', Uranus: 'Uranus', Neptune: 'Neptune', Pluto: 'Pluto',\n        NorthNode: 'Node', SouthNode: 'S.Node', Chiron: 'Chiron', Lilith: 'Lilith',\n        Ascendant: 'ASC', Midheaven: 'MC',\n    },\n    es: {\n        Sun: 'Sol', Moon: 'Luna', Mercury: 'Mercurio', Venus: 'Venus', Mars: 'Marte',\n        Jupiter: 'Jpiter', Saturn: 'Saturno', Uranus: 'Urano', Neptune: 'Neptuno', Pluto: 'Plutn',\n        NorthNode: 'Nodo', SouthNode: 'Nodo S.', Chiron: 'Quirn', Lilith: 'Lilith',\n        Ascendant: 'ASC', Midheaven: 'MC',\n    },\n};\n\n/**\n * Displays chart information - supports single chart or synastry (two charts side by side)\n */\nexport function ChartInfoPanel({\n    chart,\n    secondChart,\n    theme = 'light',\n    language = 'en',\n    showHouses = true,\n    showElements = true,\n    className,\n}: ChartInfoPanelProps) {\n    const isDark = theme === 'dark';\n    const isSynastry = Boolean(secondChart);\n\n    // Colors\n    const chart1Color = '#4a90d9';\n    const chart2Color = '#d94a4a';\n\n    // Planet order for display\n    const planetOrder: PlanetName[] = [\n        'Sun', 'Moon', 'Mercury', 'Venus', 'Mars', 'Jupiter', 'Saturn',\n        'Uranus', 'Neptune', 'Pluto', 'NorthNode', 'Lilith', 'Chiron'\n    ];\n\n    const sortPlanets = (planets: PlanetPosition[]): PlanetPosition[] => {\n        return [...planets]\n            .filter((p: PlanetPosition) => planetOrder.includes(p.planet))\n            .sort((a: PlanetPosition, b: PlanetPosition) => planetOrder.indexOf(a.planet) - planetOrder.indexOf(b.planet));\n    };\n\n    const sortedPlanets1 = useMemo(() => sortPlanets(chart.planets), [chart.planets]);\n    const sortedPlanets2 = useMemo(() => secondChart ? sortPlanets(secondChart.planets) : [], [secondChart]);\n\n    const formatDegree = (degree: number): string => {\n        const deg = Math.floor(degree);\n        const min = Math.round((degree - deg) * 60);\n        return `${deg}${min.toString().padStart(2, '0')}'`;\n    };\n\n    const getPlanetName = (planet: PlanetName): string => {\n        return PLANET_NAMES[language][planet] || planet;\n    };\n\n    // Styles\n    const containerStyle: React.CSSProperties = {\n        backgroundColor: isDark ? '#1a1a2e' : '#fff',\n        color: isDark ? '#e0e0e0' : '#333',\n        padding: '1rem',\n        borderRadius: '8px',\n        border: isDark ? '1px solid #333' : '1px solid #ddd',\n        fontSize: '14px',\n        fontFamily: 'system-ui, sans-serif',\n        maxWidth: isSynastry ? '420px' : '320px',\n    };\n\n    const sectionTitleStyle: React.CSSProperties = {\n        fontWeight: 'bold',\n        fontSize: '14px',\n        marginBottom: '0.5rem',\n        marginTop: '0.75rem',\n        color: isDark ? '#fff' : '#333',\n    };\n\n    const symbolStyle: React.CSSProperties = {\n        fontFamily: 'Segoe UI Symbol, Symbola, sans-serif',\n        fontSize: '16px',\n    };\n\n    const cellStyle: React.CSSProperties = {\n        padding: '0.3rem 0.25rem',\n        borderBottom: isDark ? '1px solid #333' : '1px solid #eee',\n        whiteSpace: 'nowrap',\n    };\n\n    // Render position (sign + degree) for a planet\n    const renderPosition = (planet: PlanetPosition | undefined, color: string) => {\n        if (!planet) return null;\n        return (\n            <span style={{ color }}>\n                <span style={symbolStyle}>{ZODIAC_SYMBOLS[planet.sign]}</span>\n                {' '}\n                {formatDegree(planet.degree)}\n                {planet.retrograde && <span style={{ fontSize: '10px', marginLeft: '2px', color: isDark ? '#ff6b6b' : '#c00' }}></span>}\n            </span>\n        );\n    };\n\n    // Get sorted house cusps\n    const houses1 = useMemo(() => [...chart.houses].sort((a: HousePosition, b: HousePosition) => a.house - b.house), [chart.houses]);\n    const houses2 = useMemo(() => secondChart ? [...secondChart.houses].sort((a: HousePosition, b: HousePosition) => a.house - b.house) : [], [secondChart]);\n\n    // Angular house labels\n    const getHouseLabel = (num: number): string => {\n        if (num === 1) return 'ASC';\n        if (num === 4) return 'IC';\n        if (num === 7) return 'DSC';\n        if (num === 10) return 'MC';\n        return '';\n    };\n\n    return (\n        <div style={containerStyle} className={className}>\n            {/* Header for synastry */}\n            {isSynastry && (\n                <div style={{\n                    display: 'flex',\n                    justifyContent: 'flex-end',\n                    gap: '2rem',\n                    marginBottom: '0.5rem',\n                    paddingBottom: '0.5rem',\n                    borderBottom: isDark ? '1px solid #444' : '1px solid #ddd',\n                }}>\n                    <div style={{ color: chart1Color, fontWeight: 'bold', fontSize: '13px', minWidth: '90px', textAlign: 'center' }}>\n                        {chart.label || (language === 'es' ? 'Persona A' : 'Person A')}\n                    </div>\n                    <div style={{ color: chart2Color, fontWeight: 'bold', fontSize: '13px', minWidth: '90px', textAlign: 'center' }}>\n                        {secondChart?.label || (language === 'es' ? 'Persona B' : 'Person B')}\n                    </div>\n                </div>\n            )}\n\n            {/* Planets Table */}\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                <tbody>\n                    {planetOrder.map(planetName => {\n                        const planet1 = sortedPlanets1.find(p => p.planet === planetName);\n                        const planet2 = sortedPlanets2.find(p => p.planet === planetName);\n\n                        if (!planet1 && !planet2) return null;\n\n                        return (\n                            <tr key={planetName}>\n                                <td style={{ ...cellStyle, ...symbolStyle, color: isDark ? '#888' : '#666', width: '24px' }}>\n                                    {PLANET_SYMBOLS[planetName]}\n                                </td>\n                                <td style={{ ...cellStyle, fontWeight: 500, minWidth: '70px' }}>\n                                    {getPlanetName(planetName)}\n                                </td>\n                                <td style={{ ...cellStyle, minWidth: '90px' }}>\n                                    {renderPosition(planet1, isSynastry ? chart1Color : (isDark ? '#e0e0e0' : '#333'))}\n                                </td>\n                                {isSynastry && (\n                                    <td style={{ ...cellStyle, minWidth: '90px' }}>\n                                        {renderPosition(planet2, chart2Color)}\n                                    </td>\n                                )}\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n\n            {/* Houses Section */}\n            {showHouses && (\n                <>\n                    <div style={sectionTitleStyle}>\n                        {language === 'es' ? 'Casas:' : 'Houses:'} (Placidus)\n                    </div>\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                        <tbody>\n                            {[1, 4, 7, 10].map(num => {\n                                const house1 = houses1.find(h => h.house === num);\n                                const house2 = houses2.find(h => h.house === num);\n                                const label = getHouseLabel(num);\n\n                                return (\n                                    <tr key={num}>\n                                        <td style={{ ...cellStyle, fontWeight: 'bold', width: '40px' }}>\n                                            {label}:\n                                        </td>\n                                        <td style={{ ...cellStyle, color: isSynastry ? chart1Color : (isDark ? '#e0e0e0' : '#333') }}>\n                                            {house1 && (\n                                                <>\n                                                    <span style={symbolStyle}>{ZODIAC_SYMBOLS[house1.sign]}</span>\n                                                    {' '}\n                                                    {formatDegree(house1.degree)}\n                                                </>\n                                            )}\n                                        </td>\n                                        {isSynastry && (\n                                            <td style={{ ...cellStyle, color: chart2Color }}>\n                                                {house2 && (\n                                                    <>\n                                                        <span style={symbolStyle}>{ZODIAC_SYMBOLS[house2.sign]}</span>\n                                                        {' '}\n                                                        {formatDegree(house2.degree)}\n                                                    </>\n                                                )}\n                                            </td>\n                                        )}\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </>\n            )}\n\n            {/* Elements Section - only for single chart */}\n            {showElements && !isSynastry && (\n                <ElementsDisplay chart={chart} language={language} isDark={isDark} />\n            )}\n        </div>\n    );\n}\n\n// Separate component for elements\nfunction ElementsDisplay({ chart, language, isDark }: { chart: AstrologicalChart; language: MandalaLanguage; isDark: boolean }) {\n    const elementCounts = useMemo(() => {\n        const counts = { fire: 0, earth: 0, air: 0, water: 0 };\n        const mainPlanets: PlanetName[] = ['Sun', 'Moon', 'Mercury', 'Venus', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune', 'Pluto'];\n\n        chart.planets.forEach((planet: PlanetPosition) => {\n            if (mainPlanets.includes(planet.planet)) {\n                const element = SIGN_ELEMENTS[planet.sign];\n                if (element && counts[element as keyof typeof counts] !== undefined) {\n                    counts[element as keyof typeof counts]++;\n                }\n            }\n        });\n\n        return counts;\n    }, [chart.planets]);\n\n    const sectionTitleStyle: React.CSSProperties = {\n        fontWeight: 'bold',\n        fontSize: '14px',\n        marginBottom: '0.5rem',\n        marginTop: '0.75rem',\n        color: isDark ? '#fff' : '#333',\n    };\n\n    const elementEmojis = { fire: '', earth: '', air: '', water: '' };\n    const elementNames = {\n        fire: language === 'es' ? 'Fuego' : 'Fire',\n        earth: language === 'es' ? 'Tierra' : 'Earth',\n        air: language === 'es' ? 'Aire' : 'Air',\n        water: language === 'es' ? 'Agua' : 'Water',\n    };\n\n    return (\n        <>\n            <div style={sectionTitleStyle}>\n                {language === 'es' ? 'Elementos' : 'Elements'}\n            </div>\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.5rem' }}>\n                {Object.entries(elementCounts).map(([element, count]) => (\n                    <div key={element} style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                        <span>{count}x</span>\n                        <span>{elementEmojis[element as keyof typeof elementEmojis]}</span>\n                        <span>{elementNames[element as keyof typeof elementNames]}</span>\n                    </div>\n                ))}\n            </div>\n        </>\n    );\n}\n","'use client';\n\nimport React, { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { AstroMandala } from '../AstroMandala';\nimport { ChartInfoPanel } from '../ChartInfoPanel';\nimport { AstroMandalaProps, AspectType, MandalaLanguage, MandalaTheme, BirthData } from '../../types';\nimport { getTranslations } from '../../constants';\n\n// CSS reset for modal isolation - prevents host page styles from affecting the modal\nconst MODAL_CSS_RESET = `\n  .astromandala-modal-root,\n  .astromandala-modal-root *,\n  .astromandala-modal-root *::before,\n  .astromandala-modal-root *::after {\n    box-sizing: border-box !important;\n    margin: 0;\n    padding: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n  }\n  .astromandala-modal-root {\n    position: fixed !important;\n    top: 0 !important;\n    left: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n    width: 100vw !important;\n    height: 100vh !important;\n    height: 100dvh !important;\n    z-index: 2147483647 !important;\n    isolation: isolate !important;\n  }\n  .astromandala-modal-root button {\n    font-family: inherit !important;\n    cursor: pointer !important;\n  }\n  .astromandala-modal-root select {\n    font-family: inherit !important;\n    cursor: pointer !important;\n  }\n  .astromandala-modal-root input[type=\"checkbox\"] {\n    cursor: pointer !important;\n    width: 16px !important;\n    height: 16px !important;\n  }\n  .astromandala-modal-root label {\n    cursor: pointer !important;\n  }\n  body.astromandala-modal-open {\n    overflow: hidden !important;\n    position: fixed !important;\n    width: 100% !important;\n    height: 100% !important;\n  }\n`;\n\nexport interface AstroMandalaWithModalProps extends AstroMandalaProps {\n    /** Initial language setting */\n    language?: MandalaLanguage;\n    /** Whether to show the expand button */\n    showExpandButton?: boolean;\n    /** Whether to show chart info panel (default: false) */\n    showChartInfo?: boolean;\n    /** Title to display in the modal header when expanded */\n    title?: string;\n    /** Birth data for the primary chart */\n    birthData?: BirthData;\n    /** Birth data for the secondary chart (synastry) */\n    secondBirthData?: BirthData;\n    /** Whether to show birth data on the chart by default (default: false) */\n    showBirthData?: boolean;\n    /** Callback when settings change */\n    onSettingsChange?: (settings: ModalSettings) => void;\n}\n\nexport interface ModalSettings {\n    showAspects: boolean;\n    showDegrees: boolean;\n    showHouses: boolean;\n    showSecondChartHouses: boolean;\n    showPlanetProjections: boolean;\n    showChartInfo: boolean;\n    showBirthData: boolean;\n    includeAnglesInSynastry: boolean;\n    aspectTypesFilter: AspectType[];\n    theme: MandalaTheme;\n    language: MandalaLanguage;\n}\n\nconst ALL_ASPECT_TYPES: AspectType[] = [\n    'conjunction', 'opposition', 'trine', 'square', 'sextile',\n    'quincunx', 'semisextile', 'semisquare', 'sesquiquadrate', 'quintile', 'biquintile'\n];\n\nconst MAJOR_ASPECTS: AspectType[] = ['conjunction', 'opposition', 'trine', 'square', 'sextile'];\n\n/**\n * AstroMandala with an expand button and fullscreen modal with settings\n */\nexport function AstroMandalaWithModal({\n    chart,\n    secondChart,\n    synastryAspects,\n    size = 500,\n    showAspects: initialShowAspects = true,\n    showDegrees: initialShowDegrees = false,\n    showHouses: initialShowHouses = true,\n    showSecondChartHouses: initialShowSecondChartHouses = true,\n    showPlanetProjections: initialShowPlanetProjections = true,\n    showChartInfo: initialShowChartInfo = false,\n    showBirthData: initialShowBirthData = false,\n    aspectTypesFilter: initialAspectTypesFilter,\n    includeAnglesInSynastry: initialIncludeAnglesInSynastry = false,\n    innerChartColor = '#4a90d9',\n    outerChartColor = '#d94a4a',\n    aspectColors,\n    theme: initialTheme = 'light',\n    language: initialLanguage = 'en',\n    className,\n    showExpandButton = true,\n    title,\n    birthData,\n    secondBirthData,\n    onSettingsChange,\n}: AstroMandalaWithModalProps) {\n    // Ref for portal container and mandala for image export\n    const portalContainerRef = useRef<HTMLDivElement | null>(null);\n    const mandalaContainerRef = useRef<HTMLDivElement | null>(null);\n    const scrollPositionRef = useRef<number>(0);\n\n    // Mobile detection and window size tracking\n    const [isMobile, setIsMobile] = useState(false);\n    const [windowSize, setWindowSize] = useState({ width: 600, height: 600 });\n    const [isMounted, setIsMounted] = useState(false);\n\n    // Handle initial mount for SSR compatibility\n    useEffect(() => {\n        setIsMounted(true);\n        return () => setIsMounted(false);\n    }, []);\n\n    useEffect(() => {\n        if (!isMounted) return;\n\n        const handleResize = () => {\n            const w = window.innerWidth;\n            const h = window.innerHeight;\n            setIsMobile(w <= 600);\n            setWindowSize({ width: w, height: h });\n        };\n        // Call immediately\n        handleResize();\n        window.addEventListener('resize', handleResize);\n\n        // Also listen for orientation change on mobile\n        window.addEventListener('orientationchange', handleResize);\n\n        return () => {\n            window.removeEventListener('resize', handleResize);\n            window.removeEventListener('orientationchange', handleResize);\n        };\n    }, [isMounted]);\n\n    // Modal state - settings start closed on mobile\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [showModalSettings, setShowModalSettings] = useState(false);\n\n    // Create/cleanup portal container and manage body scroll lock\n    useEffect(() => {\n        if (!isMounted) return;\n\n        if (isModalOpen) {\n            // Save current scroll position\n            scrollPositionRef.current = window.scrollY;\n\n            // Create portal container\n            const container = document.createElement('div');\n            container.id = 'astromandala-modal-portal';\n            document.body.appendChild(container);\n            portalContainerRef.current = container;\n\n            // Inject CSS reset styles\n            const styleElement = document.createElement('style');\n            styleElement.id = 'astromandala-modal-styles';\n            styleElement.textContent = MODAL_CSS_RESET;\n            document.head.appendChild(styleElement);\n\n            // Lock body scroll\n            document.body.classList.add('astromandala-modal-open');\n            document.body.style.top = `-${scrollPositionRef.current}px`;\n\n            // Force update to trigger portal render\n            setWindowSize({ width: window.innerWidth, height: window.innerHeight });\n\n            return () => {\n                // Remove portal container\n                if (portalContainerRef.current && document.body.contains(portalContainerRef.current)) {\n                    document.body.removeChild(portalContainerRef.current);\n                    portalContainerRef.current = null;\n                }\n\n                // Remove CSS reset styles\n                const styleEl = document.getElementById('astromandala-modal-styles');\n                if (styleEl) {\n                    document.head.removeChild(styleEl);\n                }\n\n                // Unlock body scroll and restore position\n                document.body.classList.remove('astromandala-modal-open');\n                document.body.style.top = '';\n                window.scrollTo(0, scrollPositionRef.current);\n            };\n        }\n    }, [isModalOpen, isMounted]);\n\n    // Handle Escape key to close modal\n    useEffect(() => {\n        if (!isModalOpen || !isMounted) return;\n\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                e.preventDefault();\n                e.stopPropagation();\n                setIsModalOpen(false);\n            }\n        };\n\n        document.addEventListener('keydown', handleKeyDown, { capture: true });\n        return () => {\n            document.removeEventListener('keydown', handleKeyDown, { capture: true });\n        };\n    }, [isModalOpen, isMounted]);\n\n    // Open settings by default on desktop when modal opens\n    useEffect(() => {\n        if (isModalOpen && !isMobile) {\n            setShowModalSettings(true);\n        }\n    }, [isModalOpen, isMobile]);\n\n    // Settings state - showChartInfo needs to be before modalMandalaSize calculation\n    const [showChartInfo, setShowChartInfo] = useState(initialShowChartInfo);\n\n    // Calculate modal mandala size - recalculate when modal opens\n    const modalMandalaSize = useMemo(() => {\n        if (!isModalOpen) return 500; // Default when closed\n\n        // Use windowSize state which updates on resize\n        const width = windowSize.width;\n        const height = windowSize.height;\n\n        if (isMobile) {\n            // On mobile, maximize space usage\n            // Subtract header height and padding from dimensions\n            const headerHeight = 45;\n            const padding = 24; // Total horizontal padding (12px each side)\n            const chartInfoHeight = showChartInfo ? Math.min(height * 0.30, 200) : 0;\n            const availableWidth = width - padding;\n            const availableHeight = height - headerHeight - chartInfoHeight - padding;\n            // Use the smaller dimension to ensure it fits, with a minimum size\n            const size = Math.min(availableWidth, availableHeight);\n            return Math.max(size, 250);\n        } else {\n            // On desktop, account for settings panel if visible\n            const availableWidth = showModalSettings ? width - 320 : width - 40;\n            const availableHeight = height - 120;\n            return Math.min(availableWidth, availableHeight);\n        }\n    }, [isMobile, windowSize, showModalSettings, isModalOpen, showChartInfo]);\n\n    // Settings state\n    const [showAspects, setShowAspects] = useState(initialShowAspects);\n    const [showDegrees, setShowDegrees] = useState(initialShowDegrees);\n    const [showHouses, setShowHouses] = useState(initialShowHouses);\n    const [showSecondChartHouses, setShowSecondChartHouses] = useState(initialShowSecondChartHouses);\n    const [showPlanetProjections, setShowPlanetProjections] = useState(initialShowPlanetProjections);\n    const [showBirthDataOnChart, setShowBirthDataOnChart] = useState(initialShowBirthData);\n    const [includeAnglesInSynastry, setIncludeAnglesInSynastry] = useState(initialIncludeAnglesInSynastry);\n    const [theme, setTheme] = useState<MandalaTheme>(initialTheme);\n    const [language, setLanguage] = useState<MandalaLanguage>(initialLanguage);\n\n    // Function to download the chart as PNG image\n    const downloadChartAsImage = useCallback(async () => {\n        if (!mandalaContainerRef.current) return;\n\n        try {\n            const container = mandalaContainerRef.current;\n            const svg = container.querySelector('svg');\n            if (!svg) return;\n\n            // Clone the SVG and add birth data text if enabled\n            const svgClone = svg.cloneNode(true) as SVGSVGElement;\n            const svgSize = parseInt(svg.getAttribute('width') || '500');\n\n            // Add birth data text to SVG if enabled\n            if (showBirthDataOnChart && birthData) {\n                const textGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                const isDarkTheme = theme === 'dark';\n                const textColor = isDarkTheme ? '#e0e0e0' : '#333';\n                const fontSize = Math.max(10, svgSize * 0.022);\n                let yOffset = svgSize + fontSize + 5;\n\n                const addTextLine = (text: string) => {\n                    const textEl = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n                    textEl.setAttribute('x', (svgSize / 2).toString());\n                    textEl.setAttribute('y', yOffset.toString());\n                    textEl.setAttribute('text-anchor', 'middle');\n                    textEl.setAttribute('fill', textColor);\n                    textEl.setAttribute('font-size', fontSize.toString());\n                    textEl.setAttribute('font-family', 'Arial, sans-serif');\n                    textEl.textContent = text;\n                    textGroup.appendChild(textEl);\n                    yOffset += fontSize + 4;\n                };\n\n                if (birthData.name) addTextLine(birthData.name);\n                if (birthData.date) addTextLine(birthData.date + (birthData.time ? ` - ${birthData.time}` : ''));\n                if (birthData.location) addTextLine(birthData.location);\n\n                if (secondBirthData) {\n                    yOffset += 5;\n                    if (secondBirthData.name) addTextLine(secondBirthData.name);\n                    if (secondBirthData.date) addTextLine(secondBirthData.date + (secondBirthData.time ? ` - ${secondBirthData.time}` : ''));\n                    if (secondBirthData.location) addTextLine(secondBirthData.location);\n                }\n\n                // Expand viewBox to include text\n                const extraHeight = yOffset - svgSize;\n                svgClone.setAttribute('height', (svgSize + extraHeight).toString());\n                svgClone.setAttribute('viewBox', `0 0 ${svgSize} ${svgSize + extraHeight}`);\n                svgClone.appendChild(textGroup);\n            }\n\n            // Convert SVG to canvas\n            const svgData = new XMLSerializer().serializeToString(svgClone);\n            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\n            const svgUrl = URL.createObjectURL(svgBlob);\n\n            const img = new Image();\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                const scale = 2; // Higher resolution\n                canvas.width = img.width * scale;\n                canvas.height = img.height * scale;\n\n                const ctx = canvas.getContext('2d');\n                if (!ctx) return;\n\n                // Fill background\n                ctx.fillStyle = theme === 'dark' ? '#1a1a2e' : '#fafafa';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                ctx.scale(scale, scale);\n                ctx.drawImage(img, 0, 0);\n\n                // Download\n                const link = document.createElement('a');\n                // Build filename from title and/or names\n                let fileName = 'astromandala_chart.png';\n                const sanitize = (str: string) => str.replace(/[^a-zA-Z0-9\\s]/g, '').replace(/\\s+/g, '_').trim();\n\n                if (title && birthData?.name && secondBirthData?.name) {\n                    // Title + both names\n                    fileName = `${sanitize(title)}_${sanitize(birthData.name)}_${sanitize(secondBirthData.name)}.png`;\n                } else if (title && birthData?.name) {\n                    // Title + first name\n                    fileName = `${sanitize(title)}_${sanitize(birthData.name)}.png`;\n                } else if (birthData?.name && secondBirthData?.name) {\n                    // Both names (synastry)\n                    fileName = `sinastria_${sanitize(birthData.name)}_${sanitize(secondBirthData.name)}.png`;\n                } else if (title) {\n                    // Only title\n                    fileName = `${sanitize(title)}.png`;\n                } else if (birthData?.name) {\n                    // Only first name\n                    fileName = `carta_${sanitize(birthData.name)}.png`;\n                }\n                link.download = fileName;\n                link.href = canvas.toDataURL('image/png');\n                link.click();\n\n                URL.revokeObjectURL(svgUrl);\n            };\n            img.src = svgUrl;\n        } catch (error) {\n            console.error('Error downloading chart:', error);\n        }\n    }, [showBirthDataOnChart, birthData, secondBirthData, theme, title]);\n\n    // Sync theme and language with props when they change\n    useEffect(() => {\n        setTheme(initialTheme);\n    }, [initialTheme]);\n\n    useEffect(() => {\n        setLanguage(initialLanguage);\n    }, [initialLanguage]);\n\n    // Aspect filters\n    const [aspectFilters, setAspectFilters] = useState<Record<AspectType, boolean>>(() => {\n        const filters: Record<AspectType, boolean> = {} as Record<AspectType, boolean>;\n        ALL_ASPECT_TYPES.forEach(aspect => {\n            filters[aspect] = initialAspectTypesFilter\n                ? initialAspectTypesFilter.includes(aspect)\n                : MAJOR_ASPECTS.includes(aspect);\n        });\n        return filters;\n    });\n\n    const t = useMemo(() => getTranslations(language), [language]);\n    const isDark = theme === 'dark';\n    const isSynastry = Boolean(secondChart);\n\n    const aspectTypesFilter = useMemo(() => {\n        return ALL_ASPECT_TYPES.filter(aspect => aspectFilters[aspect]);\n    }, [aspectFilters]);\n\n    const toggleAspectFilter = useCallback((aspect: AspectType) => {\n        setAspectFilters(prev => ({ ...prev, [aspect]: !prev[aspect] }));\n    }, []);\n\n    // Notify parent of settings changes\n    const notifySettingsChange = useCallback(() => {\n        if (onSettingsChange) {\n            onSettingsChange({\n                showAspects,\n                showDegrees,\n                showHouses,\n                showSecondChartHouses,\n                showPlanetProjections,\n                showChartInfo,\n                showBirthData: showBirthDataOnChart,\n                includeAnglesInSynastry,\n                aspectTypesFilter,\n                theme,\n                language,\n            });\n        }\n    }, [showAspects, showDegrees, showHouses, showSecondChartHouses, showPlanetProjections, showChartInfo, showBirthDataOnChart, includeAnglesInSynastry, aspectTypesFilter, theme, language, onSettingsChange]);\n\n    // Common mandala props for MODAL (uses internal state)\n    const modalMandalaProps = {\n        chart,\n        secondChart,\n        synastryAspects,\n        showAspects,\n        showDegrees,\n        showHouses,\n        showSecondChartHouses,\n        showPlanetProjections,\n        aspectTypesFilter,\n        includeAnglesInSynastry,\n        innerChartColor,\n        outerChartColor,\n        aspectColors,\n        theme,\n        language,\n    };\n\n    // Main mandala props (uses initial props from parent)\n    const mainMandalaProps = {\n        chart,\n        secondChart,\n        synastryAspects,\n        showAspects: initialShowAspects,\n        showDegrees: initialShowDegrees,\n        showHouses: initialShowHouses,\n        showSecondChartHouses: initialShowSecondChartHouses,\n        showPlanetProjections: initialShowPlanetProjections,\n        aspectTypesFilter: initialAspectTypesFilter,\n        includeAnglesInSynastry: initialIncludeAnglesInSynastry,\n        innerChartColor,\n        outerChartColor,\n        aspectColors,\n        theme: initialTheme,\n        language: initialLanguage,\n    };\n\n    // Styles\n    const buttonStyle = {\n        padding: '0.5rem 0.75rem',\n        borderRadius: '4px',\n        border: 'none',\n        backgroundColor: isDark ? 'rgba(255,255,255,0.15)' : 'rgba(0,0,0,0.08)',\n        color: isDark ? '#fff' : '#333',\n        cursor: 'pointer',\n        fontSize: '14px',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.25rem',\n    };\n\n    // Expand button needs more visibility\n    const expandButtonStyle = {\n        ...buttonStyle,\n        backgroundColor: isDark ? 'rgba(255,255,255,0.25)' : 'rgba(255,255,255,0.85)',\n        border: isDark ? '1px solid rgba(255,255,255,0.3)' : '1px solid rgba(0,0,0,0.15)',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n        position: 'absolute' as const,\n        top: '0.5rem',\n        right: '0.5rem',\n        zIndex: 10,\n    };\n\n    const checkboxLabelStyle = {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n        cursor: 'pointer',\n        fontSize: '14px',\n        padding: '0.25rem 0',\n    };\n\n    const sectionStyle = {\n        marginBottom: '1rem',\n        padding: '0.75rem',\n        backgroundColor: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.03)',\n        borderRadius: '6px',\n    };\n\n    // Modal content - rendered via portal for isolation\n    const modalContent = isModalOpen && isMounted && portalContainerRef.current ? (\n        <div\n            className=\"astromandala-modal-root\"\n            style={{\n                backgroundColor: isDark ? '#121212' : '#ffffff',\n                display: 'flex',\n                flexDirection: 'column',\n                overflow: isMobile ? 'auto' : 'hidden',\n            }}\n            // Prevent click events from propagating to parent\n            onClick={(e) => e.stopPropagation()}\n        >\n            {/* Modal Header */}\n            <div\n                style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: isMobile ? '0.25rem 0.5rem' : '0.5rem 1rem',\n                    borderBottom: isDark ? '1px solid #333' : '1px solid #ddd',\n                    backgroundColor: isDark ? '#1a1a1a' : '#f5f5f5',\n                    flexShrink: 0,\n                    minHeight: isMobile ? '40px' : '48px',\n                    maxHeight: isMobile ? '40px' : '48px',\n                    width: '100%',\n                    boxSizing: 'border-box',\n                    overflow: isMobile ? 'auto' : 'hidden',\n                }}\n            >\n                <div style={{ display: 'flex', alignItems: 'center', gap: isMobile ? '0.25rem' : '1rem', flexShrink: 1, overflow: 'hidden' }}>\n                    {/* Title */}\n                    {title && (\n                        <h1 style={{\n                            margin: 0,\n                            fontSize: isMobile ? '14px' : '18px',\n                            fontWeight: 600,\n                            color: isDark ? '#fff' : '#333',\n                            whiteSpace: 'nowrap',\n                            overflow: isMobile ? 'auto' : 'hidden',\n                            textOverflow: 'ellipsis',\n                            maxWidth: isMobile ? '120px' : '300px',\n                        }}>\n                            {title}\n                        </h1>\n                    )}\n                    <button\n                        onClick={() => setShowModalSettings(!showModalSettings)}\n                        style={{\n                            ...buttonStyle,\n                            padding: isMobile ? '0.25rem 0.4rem' : buttonStyle.padding,\n                            fontSize: isMobile ? '14px' : buttonStyle.fontSize,\n                            minWidth: isMobile ? 'auto' : undefined,\n                        }}\n                        title={t.settings}\n                    >\n                        {isMobile ? '' : ` ${showModalSettings ? '' : ''} ${t.settings}`}\n                    </button>\n\n                    {/* Language selector */}\n                    <select\n                        value={language}\n                        onChange={(e) => setLanguage(e.target.value as MandalaLanguage)}\n                        style={{\n                            padding: isMobile ? '0.25rem' : '0.5rem',\n                            borderRadius: '4px',\n                            border: isDark ? '1px solid #444' : '1px solid #ccc',\n                            backgroundColor: isDark ? '#333' : '#fff',\n                            color: isDark ? '#fff' : '#333',\n                            cursor: 'pointer',\n                            fontSize: isMobile ? '14px' : '14px',\n                            minWidth: isMobile ? 'auto' : undefined,\n                        }}\n                    >\n                        <option value=\"en\">{isMobile ? '' : ' English'}</option>\n                        <option value=\"es\">{isMobile ? '' : ' Espaol'}</option>\n                    </select>\n\n                    {/* Theme toggle */}\n                    <button\n                        onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}\n                        style={{\n                            ...buttonStyle,\n                            padding: isMobile ? '0.25rem 0.4rem' : buttonStyle.padding,\n                            fontSize: isMobile ? '14px' : buttonStyle.fontSize,\n                            minWidth: isMobile ? 'auto' : undefined,\n                        }}\n                    >\n                        {isDark ? '' : ''}\n                    </button>\n\n                    {/* Download image button */}\n                    <button\n                        onClick={downloadChartAsImage}\n                        style={{\n                            ...buttonStyle,\n                            padding: isMobile ? '0.25rem 0.4rem' : buttonStyle.padding,\n                            fontSize: isMobile ? '14px' : buttonStyle.fontSize,\n                            minWidth: isMobile ? 'auto' : undefined,\n                            backgroundColor: isDark ? 'rgba(74, 144, 217, 0.3)' : 'rgba(74, 144, 217, 0.15)',\n                        }}\n                        title={t.downloadImage}\n                    >\n                        {isMobile ? '' : ` ${t.downloadImage}`}\n                    </button>\n                </div>\n\n                <button\n                    onClick={() => setIsModalOpen(false)}\n                    style={{\n                        ...buttonStyle,\n                        backgroundColor: isDark ? '#c53030' : '#e53e3e',\n                        color: '#fff',\n                        padding: isMobile ? '0.25rem 0.5rem' : buttonStyle.padding,\n                        fontSize: isMobile ? '14px' : buttonStyle.fontSize,\n                        minWidth: isMobile ? 'auto' : undefined,\n                        flexShrink: 0,\n                        marginLeft: isMobile ? '0.25rem' : undefined,\n                    }}\n                >\n                    \n                </button>\n            </div>\n\n            {/* Modal Body */}\n            <div\n                style={{\n                    flex: 1,\n                    display: 'flex',\n                    overflow: isMobile ? 'auto' : 'hidden',\n                }}\n            >\n                {/* Settings Panel */}\n                {showModalSettings && (\n                    <div\n                        style={{\n                            width: '280px',\n                            minWidth: '280px',\n                            padding: '1rem',\n                            overflowY: 'auto',\n                            borderRight: isDark ? '1px solid #333' : '1px solid #ddd',\n                            backgroundColor: isDark ? '#1a1a1a' : '#fafafa',\n                            color: isDark ? '#e0e0e0' : '#333',\n                        }}\n                    >\n                        {/* Display options */}\n                        <div style={sectionStyle}>\n                            <h4 style={{ margin: '0 0 0.5rem 0', fontSize: '13px', textTransform: 'uppercase', opacity: 0.7 }}>\n                                {t.settings}\n                            </h4>\n\n                            <label style={checkboxLabelStyle}>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showAspects}\n                                    onChange={(e) => setShowAspects(e.target.checked)}\n                                />\n                                {t.showAspects}\n                            </label>\n\n                            <label style={checkboxLabelStyle}>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showDegrees}\n                                    onChange={(e) => setShowDegrees(e.target.checked)}\n                                />\n                                {t.showDegrees}\n                            </label>\n\n                            <label style={checkboxLabelStyle}>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showHouses}\n                                    onChange={(e) => setShowHouses(e.target.checked)}\n                                />\n                                {t.showHouses}\n                            </label>\n\n                            {isSynastry && (\n                                <label style={checkboxLabelStyle}>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={showSecondChartHouses}\n                                        onChange={(e) => setShowSecondChartHouses(e.target.checked)}\n                                    />\n                                    {t.showChart2Houses}\n                                </label>\n                            )}\n\n                            <label style={checkboxLabelStyle}>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showPlanetProjections}\n                                    onChange={(e) => setShowPlanetProjections(e.target.checked)}\n                                />\n                                {t.showPlanetProjections}\n                            </label>\n\n                            <label style={checkboxLabelStyle}>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showChartInfo}\n                                    onChange={(e) => setShowChartInfo(e.target.checked)}\n                                />\n                                {t.showChartInfo}\n                            </label>\n\n                            {(birthData || secondBirthData) && (\n                                <label style={checkboxLabelStyle}>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={showBirthDataOnChart}\n                                        onChange={(e) => setShowBirthDataOnChart(e.target.checked)}\n                                    />\n                                    {t.showBirthData}\n                                </label>\n                            )}\n\n                            {isSynastry && showAspects && (\n                                <label style={checkboxLabelStyle}>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={includeAnglesInSynastry}\n                                        onChange={(e) => setIncludeAnglesInSynastry(e.target.checked)}\n                                    />\n                                    {t.includeAnglesInSynastry}\n                                </label>\n                            )}\n                        </div>\n\n                        {/* Aspect Types */}\n                        {showAspects && (\n                            <div style={sectionStyle}>\n                                <h4 style={{ margin: '0 0 0.5rem 0', fontSize: '13px', textTransform: 'uppercase', opacity: 0.7 }}>\n                                    {t.aspectTypes}\n                                </h4>\n\n                                <div style={{ marginBottom: '0.5rem' }}>\n                                    <span style={{ fontSize: '12px', opacity: 0.6 }}>{t.majorAspects}</span>\n                                </div>\n\n                                {MAJOR_ASPECTS.map(aspect => (\n                                    <label key={aspect} style={{ ...checkboxLabelStyle, fontSize: '13px' }}>\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={aspectFilters[aspect]}\n                                            onChange={() => toggleAspectFilter(aspect)}\n                                        />\n                                        {t[aspect]}\n                                    </label>\n                                ))}\n\n                                <div style={{ marginTop: '0.75rem', marginBottom: '0.5rem' }}>\n                                    <span style={{ fontSize: '12px', opacity: 0.6 }}>{t.minorAspects}</span>\n                                </div>\n\n                                {ALL_ASPECT_TYPES.filter(a => !MAJOR_ASPECTS.includes(a)).map(aspect => (\n                                    <label key={aspect} style={{ ...checkboxLabelStyle, fontSize: '13px' }}>\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={aspectFilters[aspect]}\n                                            onChange={() => toggleAspectFilter(aspect)}\n                                        />\n                                        {t[aspect]}\n                                    </label>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n                )}\n\n                {/* Mandala Container */}\n                <div\n                    style={{\n                        flex: 1,\n                        display: 'flex',\n                        flexDirection: isMobile ? 'column' : 'row',\n                        justifyContent: isMobile ? 'flex-start' : 'center',\n                        alignItems: 'center',\n                        padding: isMobile ? '0.5rem' : '1rem',\n                        backgroundColor: isDark ? '#0d0d1a' : '#f0f0f0',\n                        overflow: isMobile ? 'auto' : 'hidden',\n                        boxSizing: 'border-box',\n                        minHeight: 0,\n                        gap: '0.5rem',\n                        width: '100%',\n                        maxWidth: '100%',\n                    }}\n                >\n                    <div\n                        ref={mandalaContainerRef}\n                        style={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                            alignItems: 'center',\n                            gap: '0.5rem',\n                        }}\n                    >\n                        <div style={{\n                            width: modalMandalaSize,\n                            height: modalMandalaSize,\n                            maxWidth: '100%',\n                            maxHeight: '100%',\n                            display: 'flex',\n                            justifyContent: 'center',\n                            alignItems: 'center',\n                            flexShrink: 1,\n                        }}>\n                            <AstroMandala\n                                {...modalMandalaProps}\n                                size={modalMandalaSize}\n                                key={`modal-mandala-${modalMandalaSize}-${showChartInfo}`}\n                            />\n                        </div>\n\n                        {/* Birth data display */}\n                        {showBirthDataOnChart && (birthData || secondBirthData) && (\n                            <div style={{\n                                textAlign: 'center',\n                                color: isDark ? '#e0e0e0' : '#333',\n                                fontSize: isMobile ? '11px' : '13px',\n                                lineHeight: 1.4,\n                                maxWidth: modalMandalaSize,\n                                padding: '0.5rem',\n                            }}>\n                                {birthData && (\n                                    <div style={{ marginBottom: secondBirthData ? '0.5rem' : 0, color: innerChartColor }}>\n                                        {birthData.name && <div style={{ fontWeight: 600 }}>{birthData.name}</div>}\n                                        {(birthData.date || birthData.time) && (\n                                            <div>{birthData.date}{birthData.time ? ` - ${birthData.time}` : ''}</div>\n                                        )}\n                                        {birthData.location && <div>{birthData.location}</div>}\n                                    </div>\n                                )}\n                                {secondBirthData && (\n                                    <div style={{ color: outerChartColor }}>\n                                        {secondBirthData.name && <div style={{ fontWeight: 600 }}>{secondBirthData.name}</div>}\n                                        {(secondBirthData.date || secondBirthData.time) && (\n                                            <div>{secondBirthData.date}{secondBirthData.time ? ` - ${secondBirthData.time}` : ''}</div>\n                                        )}\n                                        {secondBirthData.location && <div>{secondBirthData.location}</div>}\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Chart Info Panel - shows next to mandala on desktop (vertically centered) */}\n                    {showChartInfo && !isMobile && (\n                        <div style={{\n                            alignSelf: 'center',\n                            maxHeight: modalMandalaSize * 0.85,\n                            overflowY: 'auto',\n                        }}>\n                            <ChartInfoPanel\n                                chart={chart}\n                                secondChart={secondChart}\n                                theme={theme}\n                                language={language}\n                            />\n                        </div>\n                    )}\n\n                    {/* Chart Info Panel for Mobile - shows below mandala (horizontally centered) */}\n                    {showChartInfo && isMobile && (\n                        <div style={{\n                            width: '100%',\n                            maxWidth: '100%',\n                            display: 'flex',\n                            justifyContent: 'center',\n                        }}>\n                            <ChartInfoPanel\n                                chart={chart}\n                                secondChart={secondChart}\n                                theme={theme}\n                                language={language}\n                            />\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    ) : null;\n\n    return (\n        <>\n            {/* Main container with expand button */}\n            <div style={{ position: 'relative', display: 'inline-block' }} className={className}>\n                {showExpandButton && (\n                    <button\n                        onClick={() => setIsModalOpen(true)}\n                        style={expandButtonStyle}\n                        title={t.expand}\n                    >\n                        \n                    </button>\n                )}\n                <AstroMandala {...mainMandalaProps} size={size} />\n            </div>\n\n            {/* Render modal via portal for isolation from parent page */}\n            {modalContent && portalContainerRef.current && createPortal(modalContent, portalContainerRef.current)}\n        </>\n    );\n}\n"]}